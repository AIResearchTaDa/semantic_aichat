# üõçÔ∏è –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ü–æ—à—É–∫ –¢–æ–≤–∞—Ä—ñ–≤ TA-DA!

## üìã –ó–º—ñ—Å—Ç
- [–û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É](#–æ–ø–∏—Å-–ø—Ä–æ–µ–∫—Ç—É)
- [–û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ](#–æ—Å–Ω–æ–≤–Ω—ñ-–º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ)
- [–ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞](#–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)
- [–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó](#—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó)
- [–í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫](#–≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è-—Ç–∞-–∑–∞–ø—É—Å–∫)
- [–ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è](#–∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è)
- [API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è](#api-–¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è)
- [–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É](#—Å—Ç—Ä—É–∫—Ç—É—Ä–∞-–ø—Ä–æ–µ–∫—Ç—É)
- [–†–æ–∑—Ä–æ–±–∫–∞](#—Ä–æ–∑—Ä–æ–±–∫–∞)
- [–õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞](#–ª–æ–≥—É–≤–∞–Ω–Ω—è-—Ç–∞-–∞–Ω–∞–ª—ñ—Ç–∏–∫–∞)

---

## üìñ –û–ø–∏—Å –ø—Ä–æ–µ–∫—Ç—É

**–°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ü–æ—à—É–∫ –¢–æ–≤–∞—Ä—ñ–≤ TA-DA!** ‚Äî —Ü–µ —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—à—É–∫—É —Ç–æ–≤–∞—Ä—ñ–≤, —è–∫–∞ –ø–æ—î–¥–Ω—É—î —Ç—Ä–∞–¥–∏—Ü—ñ–π–Ω–∏–π –ø–æ—à—É–∫ –∑ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º –¥–ª—è –Ω–∞–¥–∞–Ω–Ω—è –ø–µ—Ä—Å–æ–Ω–∞–±—ñ–∑–æ–≤–∞–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –ø–æ–∫—É–ø—Ü—è–º.

### –û—Å–æ–±–ª–∏–≤–æ—Å—Ç—ñ
- üîç **–ö–ª–∞—Å–∏—á–Ω–∏–π –ø–æ—à—É–∫** ‚Äî —à–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤ –∑–∞ –Ω–∞–∑–≤–æ—é –∞–±–æ –∫–∞—Ç–µ–≥–æ—Ä—ñ—î—é
- ü§ñ **AI –ß–∞—Ç-–ø–æ—à—É–∫** ‚Äî —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–∏–π –ø–æ–º—ñ—á–Ω–∏–∫ –Ω–∞ –±–∞–∑—ñ GPT-4, —è–∫–∏–π —Ä–æ–∑—É–º—ñ—î –ø—Ä–∏—Ä–æ–¥–Ω—É –º–æ–≤—É
- üéØ **–°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –∞–Ω–∞–ª—ñ–∑** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä–Ω–∏—Ö embeddings (Qwen3-Embedding-8B) –¥–ª—è —Ç–æ—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
- üìä **–ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫** ‚Äî –∫–æ–º–±—ñ–Ω–∞—Ü—ñ—è BM25 (—Ç–µ–∫—Å—Ç–æ–≤–∏–π) —Ç–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É
- üé® **–°—É—á–∞—Å–Ω–∏–π UI/UX** ‚Äî –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –≤–µ–±-—ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∑ –ø—Ä–∏–≤–∞–±–ª–∏–≤–∏–º –¥–∏–∑–∞–π–Ω–æ–º
- üìà **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø–æ—à—É–∫—É** ‚Äî –¥–µ—Ç–∞–ª—å–Ω–µ –ª–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ–∑ —è–∫–æ—Å—Ç—ñ –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤

---

## üåü –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

### 1. –ö–ª–∞—Å–∏—á–Ω–∏–π –ø–æ—à—É–∫
- –®–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é —Ç–æ–≤–∞—Ä—É
- –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è –∑–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏
- –ê–≤—Ç–æ–¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è
- –ü–∞–≥—ñ–Ω–∞—Ü—ñ—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

### 2. AI –ß–∞—Ç-–ø–æ—à—É–∫
- **–†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É** ‚Äî GPT-4 –∞–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç —Ç–∞ –≤–∏–∑–Ω–∞—á–∞—î –Ω–∞–º—ñ—Ä –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ —Ä–æ–∑–±–∏—Ç—Ç—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –Ω–∞ –ø—Ä–æ—Å—Ç—ñ—à—ñ
- **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ—Ä–∞–¥–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
- **–ü–æ—Ç–æ–∫–æ–≤–∞ –ø–µ—Ä–µ–¥–∞—á–∞ –¥–∞–Ω–∏—Ö** ‚Äî SSE (Server-Sent Events) –¥–ª—è –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ
- **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∏–π –¥—ñ–∞–ª–æ–≥** ‚Äî –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó —Ä–æ–∑–º–æ–≤–∏ –¥–ª—è –∫—Ä–∞—â–æ–≥–æ —Ä–æ–∑—É–º—ñ–Ω–Ω—è

### 3. –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫
- **–í–µ–∫—Ç–æ—Ä–Ω—ñ embeddings** ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è Qwen3-Embedding-8B (4096 –≤–∏–º—ñ—Ä—ñ–≤)
- **KNN –ø–æ—à—É–∫** ‚Äî —à–≤–∏–¥–∫–∏–π –ø–æ—à—É–∫ —Å—Ö–æ–∂–∏—Ö –≤–µ–∫—Ç–æ—Ä—ñ–≤ –≤ Elasticsearch
- **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** ‚Äî –¥–∏–Ω–∞–º—ñ—á–Ω—ñ –ø–æ—Ä–æ–≥–∏ –¥–ª—è –±–∞–ª–∞–Ω—Å—É –º—ñ–∂ —Ç–æ—á–Ω—ñ—Å—Ç—é —Ç–∞ –ø–æ–≤–Ω–æ—Ç–æ—é
- **–ö–µ—à—É–≤–∞–Ω–Ω—è** ‚Äî LRU-–∫–µ—à –¥–ª—è embeddings –∑—ñ –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è–º —á–∞—Å–æ–≤–∏—Ö –º—ñ—Ç–æ–∫

### 4. –£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –∫–æ—à–∏–∫–æ–º
- –î–æ–¥–∞–≤–∞–Ω–Ω—è/–≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
- –ü–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–∏–π –∫–æ—à–∏–∫ –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é
- –ú—ñ–Ω—ñ-–∫–æ—à–∏–∫–∏ –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –¥–æ—Å—Ç—É–ø—É
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ –∑–∞–≥–∞–ª—å–Ω–æ—ó –≤–∞—Ä—Ç–æ—Å—Ç—ñ

---

## üèóÔ∏è –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   –í–µ–±-–∫–ª—ñ—î–Ω—Ç    ‚îÇ
‚îÇ  (Nginx:8080)   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ ‚îÇ   ‚îÇ   FastAPI API    ‚îÇ
‚îÇ   (HTML/CSS/JS) ‚îÇ   ‚îÇ   (Python:8000)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                               ‚îÇ
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                     ‚ñº                     ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Elasticsearch  ‚îÇ   ‚îÇ  Embedding API   ‚îÇ ‚îÇ    OpenAI GPT-4  ‚îÇ
‚îÇ   (–≤–µ–∫—Ç–æ—Ä–Ω–∏–π    ‚îÇ   ‚îÇ  (Qwen3-8B:9001) ‚îÇ ‚îÇ  (–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)  ‚îÇ
‚îÇ     —ñ–Ω–¥–µ–∫—Å)     ‚îÇ   ‚îÇ                  ‚îÇ ‚îÇ                  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ö–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

1. **Frontend (Web)**
   - `index.html` ‚Äî –≥–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
   - `scripts.js` ‚Äî –ª–æ–≥—ñ–∫–∞ –¥–æ–¥–∞—Ç–∫—É
   - `styles.css` ‚Äî —Å—Ç–∏–ª—ñ —Ç–∞ –∞–Ω—ñ–º–∞—Ü—ñ—ó
   - –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î Fetch API –¥–ª—è –≤–∑–∞—î–º–æ–¥—ñ—ó –∑ backend

2. **Backend (FastAPI)**
   - `main.py` ‚Äî –æ—Å–Ω–æ–≤–Ω–∏–π API —Å–µ—Ä–≤–µ—Ä
   - `search_logger.py` ‚Äî –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
   - `reindex_products.py` ‚Äî —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç —Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó

3. **Elasticsearch**
   - –ó–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤–µ–∫—Ç–æ—Ä—ñ–≤ embeddings
   - KNN –ø–æ—à—É–∫
   - BM25 —Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫
   - –ü–ª–∞–≥—ñ–Ω –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏

4. **Nginx**
   - Reverse proxy –¥–ª—è API
   - –†–æ–∑–¥–∞—á–∞ —Å—Ç–∞—Ç–∏—á–Ω–∏—Ö —Ñ–∞–π–ª—ñ–≤
   - SSE –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ—ó –ø–µ—Ä–µ–¥–∞—á—ñ

---

## üíª –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

### Backend
- **Python 3.10** ‚Äî –º–æ–≤–∞ –ø—Ä–æ–≥—Ä–∞–º—É–≤–∞–Ω–Ω—è
- **FastAPI 0.104.1** ‚Äî –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **Elasticsearch 8.11.0** ‚Äî –ø–æ—à—É–∫–æ–≤–∏–π –¥–≤–∏–∂–æ–∫
- **httpx 0.25.2** ‚Äî HTTP –∫–ª—ñ—î–Ω—Ç
- **Pydantic 2.5.0** ‚Äî –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö
- **Tenacity 8.2.3** ‚Äî retry –ª–æ–≥—ñ–∫–∞

### Frontend
- **Vanilla JavaScript** ‚Äî –±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤ –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
- **HTML5/CSS3** ‚Äî —Å—É—á–∞—Å–Ω–∏–π –∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –¥–∏–∑–∞–π–Ω
- **Server-Sent Events (SSE)** ‚Äî –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ—ó –ø–µ—Ä–µ–¥–∞—á—ñ –¥–∞–Ω–∏—Ö
- **Google Fonts** ‚Äî —à—Ä–∏—Ñ—Ç–∏ Inter —Ç–∞ Poppins

### AI/ML
- **Qwen3-Embedding-8B (Q8_0)** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è embeddings (4096 –≤–∏–º—ñ—Ä—ñ–≤)
- **OpenAI GPT-4o-mini** ‚Äî –∞–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
- **Ollama** ‚Äî –ª–æ–∫–∞–ª—å–Ω–∏–π inference —Å–µ—Ä–≤–µ—Ä

### Infrastructure
- **Docker Compose** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü—ñ—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
- **Nginx** ‚Äî –≤–µ–±-—Å–µ—Ä–≤–µ—Ä —Ç–∞ reverse proxy
- **Elasticsearch 8.11.1** ‚Äî –∑ –ø–ª–∞–≥—ñ–Ω–æ–º –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏

---

## üöÄ –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Ç–∞ –∑–∞–ø—É—Å–∫

### –ü–µ—Ä–µ–¥—É–º–æ–≤–∏
- Docker —Ç–∞ Docker Compose
- –ú—ñ–Ω—ñ–º—É–º 4GB RAM –¥–ª—è Elasticsearch
- –î–æ—Å—Ç—É–ø –¥–æ Ollama API –∑ –º–æ–¥–µ–ª–ª—é Qwen3-Embedding-8B
- OpenAI API –∫–ª—é—á (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ, –¥–ª—è AI —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π)

### –ö—Ä–æ–∫ 1: –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
```bash
git clone <repository-url>
cd EmbeddingsQwen3
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `backend/.env`:
```env
# Elasticsearch
ELASTIC_URL=http://elasticsearch-qwen3:9200
INDEX_NAME=products_qwen3_8b

# Embedding API
EMBEDDING_API_URL=http://10.2.0.171:9001/api/embeddings
OLLAMA_MODEL_NAME=dengcao/Qwen3-Embedding-8B:Q8_0
VECTOR_DIMENSION=4096

# OpenAI (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ)
OPENAI_API_KEY=your-api-key-here
GPT_MODEL=gpt-4o-mini
ENABLE_GPT_CHAT=true

# TA-DA API
TA_DA_API_TOKEN=your-ta-da-token
TA_DA_DEFAULT_SHOP_ID=8
```

### –ö—Ä–æ–∫ 3: –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –º–µ—Ä–µ–∂—ñ —Ç–∞ volumes
```bash
docker network create embeddingsqwen3_semantic-search-net
docker volume create embeddingsqwen3_elasticsearch-data
```

### –ö—Ä–æ–∫ 4: –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤—ñ—Å—ñ–≤
```bash
docker-compose up -d
```

### –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–µ—Ä–≤—ñ—Å—ñ–≤
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Elasticsearch
curl http://localhost:9200/_cluster/health

# –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ API
curl http://localhost:8080/health
```

### –ö—Ä–æ–∫ 6: –Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è —Ç–æ–≤–∞—Ä—ñ–≤
```bash
# –Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ —Ä–µ—ñ–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏
docker exec -it api_qwen3 python reindex_products.py
```

### –ö—Ä–æ–∫ 7: –í—ñ–¥–∫—Ä–∏–π—Ç–µ –¥–æ–¥–∞—Ç–æ–∫
–ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `http://localhost:8080`

---

## ‚öôÔ∏è –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è

### Backend –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è (`.env`)

#### Elasticsearch
```env
ELASTIC_URL=http://elasticsearch-qwen3:9200  # URL Elasticsearch
INDEX_NAME=products_qwen3_8b                 # –ù–∞–∑–≤–∞ —ñ–Ω–¥–µ–∫—Å—É
VECTOR_DIMENSION=4096                         # –†–æ–∑–º—ñ—Ä–Ω—ñ—Å—Ç—å –≤–µ–∫—Ç–æ—Ä—ñ–≤
VECTOR_FIELD_NAME=description_vector          # –ù–∞–∑–≤–∞ –ø–æ–ª—è –∑ –≤–µ–∫—Ç–æ—Ä–∞–º–∏
```

#### Embeddings
```env
EMBEDDING_API_URL=http://10.2.0.171:9001/api/embeddings
OLLAMA_MODEL_NAME=dengcao/Qwen3-Embedding-8B:Q8_0
EMBED_CACHE_SIZE=2000                         # –†–æ–∑–º—ñ—Ä LRU –∫–µ—à—É
CACHE_TTL_SECONDS=3600                        # –ß–∞—Å –∂–∏—Ç—Ç—è –∫–µ—à—É
EMBEDDING_MAX_CONCURRENT=2                    # –ú–∞–∫—Å. –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
```

#### –ü–æ—à—É–∫
```env
KNN_NUM_CANDIDATES=500                        # –ö–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –¥–ª—è KNN
HYBRID_ALPHA=0.7                              # –í–∞–≥–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É (0-1)
HYBRID_FUSION=weighted                        # –ú–µ—Ç–æ–¥ –æ–±'—î–¥–Ω–∞–Ω–Ω—è (weighted/rrf)
BM25_MIN_SCORE=5.0                            # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π BM25 score
```

#### GPT
```env
OPENAI_API_KEY=sk-...                         # OpenAI API –∫–ª—é—á
GPT_MODEL=gpt-4o-mini                         # –ú–æ–¥–µ–ª—å GPT
ENABLE_GPT_CHAT=true                          # –£–≤—ñ–º–∫–Ω—É—Ç–∏ AI —á–∞—Ç
GPT_TEMPERATURE=0.3                           # –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó
GPT_MAX_TOKENS_ANALYZE=250                    # –¢–æ–∫–µ–Ω—ñ–≤ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
GPT_MAX_TOKENS_RECO=500                       # –¢–æ–∫–µ–Ω—ñ–≤ –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
GPT_ANALYZE_TIMEOUT_SECONDS=10.0              # –¢–∞–π–º–∞—É—Ç –∞–Ω–∞–ª—ñ–∑—É
GPT_RECO_TIMEOUT_SECONDS=15.0                 # –¢–∞–π–º–∞—É—Ç —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
```

#### –ß–∞—Ç-–ø–æ—à—É–∫
```env
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.4         # –í—ñ–¥–Ω–æ—à–µ–Ω–Ω—è –¥–æ max score
CHAT_SEARCH_MIN_SCORE_ABSOLUTE=0.3            # –ê–±—Å–æ–ª—é—Ç–Ω–∏–π –º—ñ–Ω—ñ–º—É–º score
CHAT_SEARCH_SUBQUERY_WEIGHT_DECAY=0.85        # –ó–º–µ–Ω—à–µ–Ω–Ω—è –≤–∞–≥–∏ –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤
CHAT_SEARCH_MAX_K_PER_SUBQUERY=20             # –ú–∞–∫—Å —Ç–æ–≤–∞—Ä—ñ–≤ –Ω–∞ –ø—ñ–¥–∑–∞–ø–∏—Ç
```

#### Lazy Loading
```env
INITIAL_PRODUCTS_BATCH=20                     # –ü–æ—á–∞—Ç–∫–æ–≤–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ç–æ–≤–∞—Ä—ñ–≤
LOAD_MORE_BATCH_SIZE=20                       # –†–æ–∑–º—ñ—Ä batch –ø—Ä–∏ –¥–æ–≥—Ä—É–∑—Ü—ñ
SEARCH_RESULTS_TTL_SECONDS=3600               # –ß–∞—Å –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
```

#### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
```env
RECO_DETAILED_COUNT=3                         # –ö-—Å—Ç—å –¥–µ—Ç–∞–ª—å–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
GROUNDED_RECOMMENDATIONS=true                 # –ë–∞–∑—É–≤–∞—Ç–∏ –Ω–∞ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö
```

---

## üì° API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

### 1. Health Check
```http
GET /health
```
**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "status": "healthy",
  "elasticsearch": "connected",
  "timestamp": "2025-10-13T10:00:00"
}
```

### 2. –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
```http
GET /config
```
**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "streaming_enabled": true,
  "gpt_enabled": true
}
```

### 3. –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
```http
POST /search
Content-Type: application/json

{
  "query": "–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ",
  "k": 20,
  "search_type": "hybrid"
}
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `query` (string, –æ–±–æ–≤'—è–∑–∫–æ–≤–∏–π) ‚Äî –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç
- `k` (int, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) ‚Äî –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º 20)
- `search_type` (string) ‚Äî —Ç–∏–ø –ø–æ—à—É–∫—É: `"hybrid"`, `"vector"`, `"bm25"`

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "results": [
    {
      "uuid": "prod-123",
      "title_ua": "–û–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ 24 –∫–æ–ª—å–æ—Ä–∏",
      "description_ua": "–ù–∞–±—ñ—Ä –æ–ª—ñ–≤—Ü—ñ–≤ –¥–ª—è –º–∞–ª—é–≤–∞–Ω–Ω—è",
      "score": 0.95,
      "image_url": "https://..."
    }
  ],
  "query": "–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ",
  "total": 42,
  "search_type": "hybrid"
}
```

### 4. AI –ß–∞—Ç-–ø–æ—à—É–∫ (SSE)
```http
GET /chat/search/sse?query=—â–æ+–ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏+–¥–∏—Ç–∏–Ω—ñ+5+—Ä–æ–∫—ñ–≤&session_id=abc123
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä–∏:**
- `query` (string) ‚Äî –ø–æ—à—É–∫–æ–≤–∏–π –∑–∞–ø–∏—Ç
- `session_id` (string) ‚Äî —ñ–¥–µ–Ω—Ç–∏—Ñ—ñ–∫–∞—Ç–æ—Ä —Å–µ—Å—ñ—ó
- `dialog_context` (string, –æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ) ‚Äî JSON –∫–æ–Ω—Ç–µ–∫—Å—Ç—É –¥—ñ–∞–ª–æ–≥—É

**–§–æ—Ä–º–∞—Ç SSE –ø–æ–¥—ñ—ó:**
```
event: intent
data: {"intent": "product_search", "clarification": null}

event: subquery
data: {"subquery": "—ñ–≥—Ä–∞—à–∫–∏ –¥–ª—è 5 —Ä–æ–∫—ñ–≤", "index": 0}

event: product
data: {"product": {...}, "score": 0.89, "recommended": true}

event: recommendation
data: {"recommendation": "–†–µ–∫–æ–º–µ–Ω–¥—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LEGO..."}

event: done
data: {"total_products": 15, "search_time_ms": 1234}
```

### 5. –ß–∞—Ç-–ø–æ—à—É–∫ (POST)
```http
POST /chat/search
Content-Type: application/json

{
  "query": "—Ç–æ–≤–∞—Ä–∏ –¥–ª—è —à–∫–æ–ª–∏",
  "session_id": "session-123",
  "k": 50
}
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "intent": "product_search",
  "clarification": null,
  "subqueries": [
    "–∑–æ—à–∏—Ç–∏ —à–∫—ñ–ª—å–Ω—ñ",
    "—Ä—É—á–∫–∏ –æ–ª—ñ–≤—Ü—ñ",
    "–ø–µ–Ω–∞–ª–∏ –ø–∞–ø–∫–∏"
  ],
  "products": [...],
  "recommendations": [...],
  "dialog_context": {...},
  "total_found": 45,
  "search_time_ms": 890
}
```

### 6. –ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –¥–æ–¥–∞—Ç–∫–æ–≤–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
```http
POST /chat/search/load-more
Content-Type: application/json

{
  "session_id": "session-123",
  "offset": 20,
  "limit": 20
}
```

### 7. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—à—É–∫—É
```http
GET /stats
```

**–í—ñ–¥–ø–æ–≤—ñ–¥—å:**
```json
{
  "total_searches": 1523,
  "cache_hits": 456,
  "cache_misses": 789,
  "cache_hit_rate": 0.366,
  "avg_search_time_ms": 234.5,
  "total_products_indexed": 12456
}
```

### 8. –û—á–∏—â–µ–Ω–Ω—è –∫–µ—à—É
```http
POST /cache/clear
```

### 9. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É
```http
GET /cache/stats
```

### 10. –ü—Ä–æ–∫—Å—ñ –∑–æ–±—Ä–∞–∂–µ–Ω—å
```http
GET /api/image-proxy?url=https://example.com/image.jpg
```

### 11. –õ–æ–≥–∏ –ø–æ—à—É–∫—É

#### –û—Ç—Ä–∏–º–∞—Ç–∏ –≤—Å—ñ —Å–µ—Å—ñ—ó
```http
GET /search-logs/sessions
```

#### –û—Ç—Ä–∏–º–∞—Ç–∏ –ª–æ–≥–∏ —Å–µ—Å—ñ—ó
```http
GET /search-logs/session/{session_id}
```

#### –ó–≤—ñ—Ç –ø–æ —Å–µ—Å—ñ—ó
```http
GET /search-logs/report/{session_id}
```

#### –ï–∫—Å–ø–æ—Ä—Ç –∑–≤—ñ—Ç—ñ–≤
```http
GET /search-logs/export
```

#### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ª–æ–≥—ñ–≤
```http
GET /search-logs/stats
```

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
EmbeddingsQwen3/
‚îÇ
‚îú‚îÄ‚îÄ backend/                          # Backend –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ main.py                       # –ì–æ–ª–æ–≤–Ω–∏–π FastAPI –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ search_logger.py              # –ú–æ–¥—É–ª—å –ª–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
‚îÇ   ‚îú‚îÄ‚îÄ reindex_products.py           # –°–∫—Ä–∏–ø—Ç —Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt              # Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                    # Docker –æ–±—Ä–∞–∑ –¥–ª—è API
‚îÇ   ‚îú‚îÄ‚îÄ .env                          # –ó–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
‚îÇ   ‚îú‚îÄ‚îÄ products.json                 # –î–∞–Ω—ñ —Ç–æ–≤–∞—Ä—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ search_logs/                  # –õ–æ–≥–∏ –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ search_queries.json       # JSON –ª–æ–≥–∏
‚îÇ       ‚îî‚îÄ‚îÄ search_queries_readable.txt # –ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ –ª–æ–≥–∏
‚îÇ
‚îú‚îÄ‚îÄ web/                              # Frontend –¥–æ–¥–∞—Ç–æ–∫
‚îÇ   ‚îú‚îÄ‚îÄ index.html                    # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ scripts.js                    # JavaScript –ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ styles.css                    # CSS —Å—Ç–∏–ª—ñ
‚îÇ   ‚îî‚îÄ‚îÄ images/                       # –ó–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–∞ —ñ–∫–æ–Ω–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ logo_aitada.png
‚îÇ       ‚îú‚îÄ‚îÄ logo_aitada4.png
‚îÇ       ‚îú‚îÄ‚îÄ icon_ai2.png
‚îÇ       ‚îú‚îÄ‚îÄ icon_search.png
‚îÇ       ‚îî‚îÄ‚îÄ tada_logo2.png
‚îÇ
‚îú‚îÄ‚îÄ elasticsearch/                    # Elasticsearch –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                    # Dockerfile –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏–º –ø–ª–∞–≥—ñ–Ω–æ–º
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml                # Docker Compose –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ nginx.conf                        # Nginx –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îî‚îÄ‚îÄ README.md                         # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –ø—Ä–æ–µ–∫—Ç—É
```

---

## üîß –†–æ–∑—Ä–æ–±–∫–∞

### –õ–æ–∫–∞–ª—å–Ω–∏–π –∑–∞–ø—É—Å–∫ backend
```bash
cd backend
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate
pip install -r requirements.txt
uvicorn main:app --reload --host 0.0.0.0 --port 8000
```

### –ü–µ—Ä–µ–≥–ª—è–¥ –ª–æ–≥—ñ–≤
```bash
# –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
docker-compose logs -f

# –ö–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å–µ—Ä–≤—ñ—Å
docker-compose logs -f api
docker-compose logs -f elasticsearch-qwen3
docker-compose logs -f nginx
```

### –í—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ Elasticsearch —ñ–Ω–¥–µ–∫—Å—É
```bash
# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —ñ–Ω–¥–µ–∫—Å
curl http://localhost:9200/products_qwen3_8b

# –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
curl http://localhost:9200/products_qwen3_8b/_count

# –ü—Ä–∏–∫–ª–∞–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
curl http://localhost:9200/products_qwen3_8b/_search?size=1
```

#### –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ embeddings API
```bash
curl -X POST http://10.2.0.171:9001/api/embeddings \
  -H "Content-Type: application/json" \
  -d '{
    "model": "dengcao/Qwen3-Embedding-8B:Q8_0",
    "prompt": "—Ç–µ—Å—Ç–æ–≤–∏–π –∑–∞–ø–∏—Ç"
  }'
```

#### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API endpoints
```bash
# Health check
curl http://localhost:8080/health

# –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
curl -X POST http://localhost:8080/search \
  -H "Content-Type: application/json" \
  -d '{"query": "–æ–ª—ñ–≤—Ü—ñ", "k": 5}'

# SSE —á–∞—Ç-–ø–æ—à—É–∫
curl -N http://localhost:8080/chat/search/sse?query=—ñ–≥—Ä–∞—à–∫–∏&session_id=test
```

### –†–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è —Ç–æ–≤–∞—Ä—ñ–≤
```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ —Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—é
docker exec -it api_qwen3 python reindex_products.py

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—è –ª–æ–≥–∏ —Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó
docker exec -it api_qwen3 tail -f /app/indexing.log
```

---

## üìä –õ–æ–≥—É–≤–∞–Ω–Ω—è —Ç–∞ –∞–Ω–∞–ª—ñ—Ç–∏–∫–∞

### –ú–æ–¥—É–ª—å SearchLogger

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –ª–æ–≥—É—î –≤—Å—ñ —á–∞—Ç-–ø–æ—à—É–∫–æ–≤—ñ –∑–∞–ø–∏—Ç–∏ –∑ –¥–µ—Ç–∞–ª—å–Ω–æ—é —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—î—é:

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- Timestamp –∑–∞–ø–∏—Ç—É
- ID —Å–µ—Å—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –û—Ä–∏–≥—ñ–Ω–∞–ª—å–Ω–∏–π –∑–∞–ø–∏—Ç
- –í–∏–∑–Ω–∞—á–µ–Ω–∏–π intent (product_search, clarification, invalid)
- –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω—ñ –ø—ñ–¥–∑–∞–ø–∏—Ç–∏
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—à—É–∫—É:
  - –ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
  - –ö—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ—Å–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
  - –í—ñ–¥—Å–æ—Ç–æ–∫ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
  - –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∏–π score
  - –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω—ñ –ø–æ—Ä–æ–≥–∏ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
  - –ß–∞—Å –≤–∏–∫–æ–Ω–∞–Ω–Ω—è –ø–æ—à—É–∫—É
- –¢–æ–ø —Ç–æ–≤–∞—Ä–∏ –∑ —ó—Ö scores
- –†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω—ñ —Ç–æ–≤–∞—Ä–∏
- –ö–∞—Ç–µ–≥–æ—Ä—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤
- –î–æ–¥–∞—Ç–∫–æ–≤–∞ —ñ–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è

### –§–æ—Ä–º–∞—Ç–∏ –ª–æ–≥—ñ–≤

#### JSON —Ñ–æ—Ä–º–∞—Ç (`search_logs/search_queries.json`)
–°—Ç—Ä—É–∫—Ç—É—Ä–æ–≤–∞–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏:
```json
{
  "timestamp": "2025-10-13T10:15:30",
  "session_id": "abc-123",
  "query": "—Ç–æ–≤–∞—Ä–∏ –¥–ª—è —à–∫–æ–ª–∏",
  "intent": "product_search",
  "subqueries": ["–∑–æ—à–∏—Ç–∏", "—Ä—É—á–∫–∏"],
  "search_stats": {
    "total_found": 45,
    "after_filtering": 28,
    "filtering_rate": 0.622,
    "max_score": 0.956,
    "threshold_final": 0.382,
    "search_time_ms": 890.5
  },
  "top_products": [...],
  "additional_info": {...}
}
```

#### –ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (`search_logs/search_queries_readable.txt`)
–§–æ—Ä–º–∞—Ç–æ–≤–∞–Ω–∏–π —Ç–µ–∫—Å—Ç –¥–ª—è —à–≤–∏–¥–∫–æ–≥–æ –∞–Ω–∞–ª—ñ–∑—É:
```
====================================================================================================
                                    –õ–û–ì–ò –ü–û–®–£–ö–û–í–ò–• –ó–ê–ü–ò–¢–Ü–í                                        
                                  –ó–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ: 2025-10-13 10:15:30                                
====================================================================================================

üì± –°–ï–°–Ü–Ø: abc-123
üìä –ö—ñ–ª—å–∫—ñ—Å—Ç—å –∑–∞–ø–∏—Ç—ñ–≤ –≤ —Å–µ—Å—ñ—ó: 5
üïê –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç: 2025-10-13T10:10:00
üïê –û—Å—Ç–∞–Ω–Ω—ñ–π –∑–∞–ø–∏—Ç: 2025-10-13T10:15:30

  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  –ó–∞–ø–∏—Ç #1
  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  üïê –ß–∞—Å:        2025-10-13T10:10:00
  üîç –ó–∞–ø–∏—Ç:      —Ç–æ–≤–∞—Ä–∏ –¥–ª—è —à–∫–æ–ª–∏ –ø–µ—Ä—à–æ–∫–ª–∞—Å–Ω–∏–∫—É
  üéØ –¢–∏–ø:        product_search
  
  üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê:
     ‚Ä¢ –ó–Ω–∞–π–¥–µ–Ω–æ —Ç–æ–≤–∞—Ä—ñ–≤:    45
     ‚Ä¢ –ü—ñ—Å–ª—è —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó:    28 (62.2%)
     ‚Ä¢ Max score:           0.9560
     ‚Ä¢ –ü–æ—Ä—ñ–≥ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó:    0.3824
     ‚Ä¢ –ß–∞—Å –ø–æ—à—É–∫—É:          890 –º—Å
  
  üîé –ü–Ü–î–ó–ê–ü–ò–¢–ò (3):
     1. –∑–æ—à–∏—Ç–∏ —à–∫—ñ–ª—å–Ω—ñ
     2. —Ä—É—á–∫–∏ –æ–ª—ñ–≤—Ü—ñ
     3. –ø–µ–Ω–∞–ª–∏ –ø–∞–ø–∫–∏
  
  üèÜ –¢–û–ü-10 –¢–û–í–ê–†–Ü–í:
     ‚≠ê  1. [0.9560] –ó–æ—à–∏—Ç —à–∫—ñ–ª—å–Ω–∏–π 12 –∞—Ä–∫—É—à—ñ–≤ –ª—ñ–Ω—ñ—è
     ‚≠ê  2. [0.9234] –†—É—á–∫–∞ –∫—É–ª—å–∫–æ–≤–∞ —Å–∏–Ω—è
        3. [0.8901] –û–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ 24 –∫–æ–ª—å–æ—Ä–∏
     ...
```

### –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ —Å–µ—Å—ñ–π

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä—É—î –∑–≤—ñ—Ç–∏ –ø–æ —Å–µ—Å—ñ—è—Ö –∑ –∞–Ω–∞–ª—ñ—Ç–∏–∫–æ—é:

```bash
# –û—Ç—Ä–∏–º–∞—Ç–∏ –∑–≤—ñ—Ç –ø–æ —Å–µ—Å—ñ—ó
curl http://localhost:8080/search-logs/report/session-123

# –ï–∫—Å–ø–æ—Ä—Ç—É–≤–∞—Ç–∏ –≤—Å—ñ —Å–µ—Å—ñ—ó
curl http://localhost:8080/search-logs/export
```

**–ú–µ—Ç—Ä–∏–∫–∏:**
- –°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Å –ø–æ—à—É–∫—É
- –°–µ—Ä–µ–¥–Ω—è –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
- –°–µ—Ä–µ–¥–Ω—ñ–π –≤—ñ–¥—Å–æ—Ç–æ–∫ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó
- –†–æ–∑–ø–æ–¥—ñ–ª scores (–º—ñ–Ω/–º–∞–∫—Å/—Å–µ—Ä–µ–¥–Ω—ñ–π)
- –Ü—Å—Ç–æ—Ä—ñ—è –≤—Å—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤ —É —Å–µ—Å—ñ—ó

---

## üéØ –ê–ª–≥–æ—Ä–∏—Ç–º–∏ –ø–æ—à—É–∫—É

### –ì—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫ (Hybrid Search)

–ö–æ–º–±—ñ–Ω—É—î –≤–µ–∫—Ç–æ—Ä–Ω–∏–π —Ç–∞ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ –¥–ª—è –Ω–∞–π–∫—Ä–∞—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:

1. **–í–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ (KNN)**
   - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è embedding –¥–ª—è –∑–∞–ø–∏—Ç—É
   - –ü–æ—à—É–∫ k –Ω–∞–π–±–ª–∏–∂—á–∏—Ö —Å—É—Å—ñ–¥—ñ–≤ –≤ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É –ø—Ä–æ—Å—Ç–æ—Ä—ñ
   - Cosine similarity –¥–ª—è –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è —Å—Ö–æ–∂–æ—Å—Ç—ñ

2. **–¢–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ (BM25)**
   - –ü–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ –≤ Elasticsearch
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ—Ä—Ñ–æ–ª–æ–≥—ñ—ó
   - Boosting –∑–∞ –ø–æ–ª—è–º–∏ (title > description)

3. **–û–±'—î–¥–Ω–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤**
   - **Weighted fusion**: `final_score = Œ± * vector_score + (1-Œ±) * bm25_score`
   - **RRF** (Reciprocal Rank Fusion): –∫–æ–º–±—ñ–Ω—É–≤–∞–Ω–Ω—è –∑–∞ —Ä–∞–Ω–≥–∞–º–∏
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `HYBRID_ALPHA` –∫–æ–Ω—Ç—Ä–æ–ª—é—î –±–∞–ª–∞–Ω—Å

### –ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∑–Ω–∞—á–∞—î –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –ø–æ—Ä—ñ–≥ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó:

```python
# –ë–∞–∑–æ–≤—ñ –ø–æ—Ä–æ–≥–∏
threshold_ratio = 0.4      # 40% –≤—ñ–¥ max_score
min_absolute = 0.3         # –ê–±—Å–æ–ª—é—Ç–Ω–∏–π –º—ñ–Ω—ñ–º—É–º

# –î–∏–Ω–∞–º—ñ—á–Ω–∏–π –ø–æ—Ä—ñ–≥
dynamic_threshold = max_score * threshold_ratio

# –ê–¥–∞–ø—Ç–∏–≤–Ω–∏–π –º—ñ–Ω—ñ–º—É–º
adaptive_min = min(dynamic_threshold, min_absolute)

# –§—ñ–Ω–∞–ª—å–Ω–∏–π –ø–æ—Ä—ñ–≥
final_threshold = max(adaptive_min, min_absolute)
```

–¶–µ –∑–∞–±–µ–∑–ø–µ—á—É—î:
- –í–∏—Å–æ–∫—É —Ç–æ—á–Ω—ñ—Å—Ç—å –ø—Ä–∏ –≤–µ–ª–∏–∫—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- –î–æ—Å—Ç–∞—Ç–Ω—é –ø–æ–≤–Ω–æ—Ç—É –ø—Ä–∏ –º–∞–ª—ñ–π –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
- –ó–∞—Ö–∏—Å—Ç –≤—ñ–¥ –ø–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤

### AI –ê–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—ñ–≤

GPT-4 –∞–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:

1. **–í–∏–∑–Ω–∞—á–µ–Ω–Ω—è intent**:
   - `product_search` ‚Äî –ø–æ—à—É–∫ —Ç–æ–≤–∞—Ä—ñ–≤
   - `clarification` ‚Äî –ø–æ—Ç—Ä—ñ–±–Ω—ñ —É—Ç–æ—á–Ω–µ–Ω–Ω—è
   - `invalid` ‚Äî –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏–π –∑–∞–ø–∏—Ç

2. **–ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤**:
   - –†–æ–∑–±–∏—Ç—Ç—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
   - –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—è –¥–ª—è —Å–µ–º–∞–Ω—Ç–∏—á–Ω–æ–≥–æ –ø–æ—à—É–∫—É
   - –ú–∞–∫—Å–∏–º—É–º 5 –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤

3. **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó**:
   - –ê–Ω–∞–ª—ñ–∑ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤
   - –ü–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ –ø–æ—Ä–∞–¥–∏
   - Grounded –≤ —Ä–µ–∞–ª—å–Ω–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö

---

## üîê –ë–µ–∑–ø–µ–∫–∞

### CORS
```python
# –î–æ–∑–≤–æ–ª–µ–Ω—ñ origins
origins = ["*"]  # –í –ø—Ä–æ–¥–∞–∫—à–µ–Ω—ñ –æ–±–º–µ–∂–∏—Ç–∏ –¥–æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö –¥–æ–º–µ–Ω—ñ–≤

app.add_middleware(
    CORSMiddleware,
    allow_origins=origins,
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### Rate Limiting
–†–µ–∫–æ–º–µ–Ω–¥—É—î—Ç—å—Å—è –¥–æ–¥–∞—Ç–∏ rate limiting –¥–ª—è production:
```python
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.post("/search")
@limiter.limit("60/minute")
async def search(...):
    ...
```

### –í–∞–ª—ñ–¥–∞—Ü—ñ—è –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö
Pydantic –º–æ–¥–µ–ª—ñ –∑–∞–±–µ–∑–ø–µ—á—É—é—Ç—å –≤–∞–ª—ñ–¥–∞—Ü—ñ—é:
```python
class SearchRequest(BaseModel):
    query: str = Field(..., min_length=1, max_length=500)
    k: int = Field(default=20, ge=1, le=100)
    search_type: str = Field(default="hybrid")
```

---

## üìà –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –û–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó

1. **–ö–µ—à—É–≤–∞–Ω–Ω—è embeddings**
   - LRU –∫–µ—à –Ω–∞ 2000 –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
   - TTL: 1 –≥–æ–¥–∏–Ω–∞
   - –•–µ—à MD5 –¥–ª—è –∫–ª—é—á—ñ–≤

2. **Lazy loading**
   - –ü–æ—á–∞—Ç–∫–æ–≤–∞ –ø–∞—Ä—Ç—ñ—è: 20 —Ç–æ–≤–∞—Ä—ñ–≤
   - –î–æ–∑–∞–≥—Ä—É–∑–∫–∞: 20 —Ç–æ–≤–∞—Ä—ñ–≤
   - –ö–µ—à—É–≤–∞–Ω–Ω—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤ –Ω–∞ 1 –≥–æ–¥–∏–Ω—É

3. **–ü–∞–≥—ñ–Ω–∞—Ü—ñ—è**
   - Elasticsearch search_after
   - –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∞ –¥–ª—è –≤–µ–ª–∏–∫–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤

4. **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ñ—Å—Ç—å**
   - AsyncIO –¥–ª—è I/O –æ–ø–µ—Ä–∞—Ü—ñ–π
   - –°–µ–º–∞—Ñ–æ—Ä –¥–ª—è –∫–æ–Ω—Ç—Ä–æ–ª—é –∫–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω–æ—Å—Ç—ñ
   - Batch –æ–±—Ä–æ–±–∫–∞ embeddings

### –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥

```bash
# CPU —Ç–∞ Memory
docker stats

# Elasticsearch health
curl http://localhost:9200/_cluster/health?pretty

# API –º–µ—Ç—Ä–∏–∫–∏
curl http://localhost:8080/stats
```

---

## üêõ –í—ñ–¥–ª–∞–≥–æ–¥–∂–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞: Elasticsearch –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker-compose logs elasticsearch-qwen3

# –ó–±—ñ–ª—å—à–∏—Ç–∏ vm.max_map_count
sudo sysctl -w vm.max_map_count=262144

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–æ—Å—Ç—ñ—Ä –Ω–∞ –¥–∏—Å–∫—É
df -h
```

### –ü—Ä–æ–±–ª–µ–º–∞: Embeddings API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑'—î–¥–Ω–∞–Ω–Ω—è
curl http://10.2.0.171:9001/api/embeddings

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Ollama –º–æ–¥–µ–ª—å
docker exec ollama ollama list
```

### –ü—Ä–æ–±–ª–µ–º–∞: –ü–æ–≤—ñ–ª—å–Ω–∏–π –ø–æ—à—É–∫
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–µ—à
curl http://localhost:8080/cache/stats

# –ó–±—ñ–ª—å—à–∏—Ç–∏ —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É
EMBED_CACHE_SIZE=5000  # —É .env

# –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ ES
curl -X PUT http://localhost:9200/products_qwen3_8b/_settings \
  -H "Content-Type: application/json" \
  -d '{"index": {"refresh_interval": "30s"}}'
```

---

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —î –≤–ª–∞—Å–Ω—ñ—Å—Ç—é TA-DA! —Ç–∞ –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è.

---

## üë• –ê–≤—Ç–æ—Ä–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

–†–æ–∑—Ä–æ–±–ª–µ–Ω–æ –¥–ª—è **TA-DA!** ‚Äî –º–µ—Ä–µ–∂—ñ –º–∞–≥–∞–∑–∏–Ω—ñ–≤ —Ç–æ–≤–∞—Ä—ñ–≤ –¥–ª—è –¥–æ–º—É —Ç–∞ —Ä–æ–¥–∏–Ω–∏.

–î–ª—è –ø–∏—Ç–∞–Ω—å —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∏:
- Email: support@ta-da.net.ua
- Website: https://ta-da.net.ua

---

## üéâ –ü–æ–¥—è–∫–∏

- **Qwen Team** ‚Äî –∑–∞ —á—É–¥–æ–≤—É embedding –º–æ–¥–µ–ª—å
- **OpenAI** ‚Äî –∑–∞ GPT-4 API
- **Elasticsearch** ‚Äî –∑–∞ –ø–æ—Ç—É–∂–Ω–∏–π –ø–æ—à—É–∫–æ–≤–∏–π –¥–≤–∏–∂–æ–∫
- **FastAPI** ‚Äî –∑–∞ —à–≤–∏–¥–∫–∏–π —Ç–∞ —Å—É—á–∞—Å–Ω–∏–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫

---

**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 13 –∂–æ–≤—Ç–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å:** Production Ready ‚úÖ

