# üõçÔ∏è –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ TA-DA ‚Äî –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –¥–ª—è –ø–µ—Ä–µ–¥–∞—á—ñ –ø—Ä–æ–µ–∫—Ç—É

## üìñ –ü—Ä–æ –ø—Ä–æ–µ–∫—Ç

**–Ü–Ω—Ç–µ–ª—ñ–≥–µ–Ω—Ç–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –ø–æ—à—É–∫—É —Ç–æ–≤–∞—Ä—ñ–≤** –¥–ª—è –º–∞–≥–∞–∑–∏–Ω—ñ–≤ TA-DA –∑ AI-–∞—Å–∏—Å—Ç–µ–Ω—Ç–æ–º.

### –©–æ –≤–º—ñ—î —Å–∏—Å—Ç–µ–º–∞:

1. **–ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫** ‚Äî –∑–≤–∏—á–∞–π–Ω–∏–π –ø–æ—à—É–∫ –∑–∞ –Ω–∞–∑–≤–æ—é —Ç–æ–≤–∞—Ä—É ("–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ")
2. **AI —á–∞—Ç-–ø–æ—à—É–∫** ‚Äî —Ä–æ–∑—É–º–Ω–∏–π –ø–æ–º—ñ—á–Ω–∏–∫, —è–∫–∏–π —Ä–æ–∑—É–º—ñ—î –ø–∏—Ç–∞–Ω–Ω—è ("–©–æ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ –¥–∏—Ç–∏–Ω—ñ –Ω–∞ 5 —Ä–æ–∫—ñ–≤?")
3. **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó** ‚Äî –ø—Ä–æ–ø–æ–Ω—É—î –¥–æ–¥–∞—Ç–∫–æ–≤—ñ —Ç–æ–≤–∞—Ä–∏ –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ—à–∏–∫–∞
4. **–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞** ‚Äî –∑–±–µ—Ä—ñ–≥–∞—î —Ç–∞ –∞–Ω–∞–ª—ñ–∑—É—î –≤—Å—ñ –ø–æ—à—É–∫–æ–≤—ñ –∑–∞–ø–∏—Ç–∏

### –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:

- **Frontend:** HTML/CSS/JavaScript (–±–µ–∑ —Ñ—Ä–µ–π–º–≤–æ—Ä–∫—ñ–≤)
- **Backend:** Python + FastAPI
- **–ë–∞–∑–∞ –¥–∞–Ω–∏—Ö:** Elasticsearch 8.11 (–∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é –º–æ—Ä—Ñ–æ–ª–æ–≥—ñ—î—é)
- **AI:**
  - Qwen3-Embedding-8B ‚Äî –¥–ª—è —Ä–æ–∑—É–º—ñ–Ω–Ω—è –∑–Ω–∞—á–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É (–≤–µ–∫—Ç–æ—Ä–Ω—ñ –µ–º–±–µ–¥–∏–Ω–≥–∏)
  - GPT-4o-mini ‚Äî –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- **–Ü–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:** Docker Compose

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
EmbeddingsQwen3/
‚îÇ
‚îú‚îÄ‚îÄ üìÇ backend/                      # BACKEND (Python)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ main.py                      # –ì–æ–ª–æ–≤–Ω–∏–π —Ñ–∞–π–ª API (~3150 —Ä—è–¥–∫—ñ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Endpoints (API –º–µ—Ç–æ–¥–∏)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ SearchEngine (–ª–æ–≥—ñ–∫–∞ –ø–æ—à—É–∫—É)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ GPTIntegration (—Ä–æ–±–æ—Ç–∞ –∑ AI)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ EmbeddingManager (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä—ñ–≤)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Cache (–∫–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ search_logger.py             # –õ–æ–≥—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ SearchLogger (–∑–±–µ—Ä—ñ–≥–∞—î –≤—Å—ñ –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ reindex_products.py          # –Ü–Ω–¥–µ–∫—Å–∞—Ü—ñ—è —Ç–æ–≤–∞—Ä—ñ–≤ –≤ Elasticsearch
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ó–∞–≤–∞–Ω—Ç–∞–∂—É—î —Ç–æ–≤–∞—Ä–∏ –∑ JSON ‚Üí Elasticsearch
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt             # –°–ø–∏—Å–æ–∫ Python –±—ñ–±–ª—ñ–æ—Ç–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile                   # –Ø–∫ –∑–±—É–¥—É–≤–∞—Ç–∏ Docker –æ–±—Ä–∞–∑
‚îÇ   ‚îú‚îÄ‚îÄ .env                         # –í–ê–ñ–õ–ò–í–û! –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è (—Ç–æ–∫–µ–Ω–∏, –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ products.json                # –ë–∞–∑–∞ —Ç–æ–≤–∞—Ä—ñ–≤ (JSON)
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ search_logs/              # –õ–æ–≥–∏ –ø–æ—à—É–∫–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
‚îÇ       ‚îú‚îÄ‚îÄ search_queries.json      # JSON —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è –ø—Ä–æ–≥—Ä–∞–º)
‚îÇ       ‚îî‚îÄ‚îÄ search_queries_readable.txt  # –ß–∏—Ç–∞–±–µ–ª—å–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç (–¥–ª—è –ª—é–¥–µ–π)
‚îÇ
‚îú‚îÄ‚îÄ üìÇ web/                          # FRONTEND (HTML/CSS/JS)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ index.html                   # –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü—Ä–∏–≤—ñ—Ç–∞–ª—å–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –°—Ç–æ—Ä—ñ–Ω–∫–∞ –ø—Ä–æ—Å—Ç–æ–≥–æ –ø–æ—à—É–∫—É
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –°—Ç–æ—Ä—ñ–Ω–∫–∞ AI —á–∞—Ç-–ø–æ—à—É–∫—É
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –ú–æ–¥–∞–ª—å–Ω—ñ –≤—ñ–∫–Ω–∞ (–∫–æ—à–∏–∫, –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ scripts.js                   # –í—Å—è –ª–æ–≥—ñ–∫–∞ frontend (~4400 —Ä—è–¥–∫—ñ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ AI —á–∞—Ç-–ø–æ—à—É–∫ (SSE stream)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –í—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ö–æ—à–∏–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ Lazy loading (–¥–æ–≥—Ä—É–∑–∫–∞ —Ç–æ–≤–∞—Ä—ñ–≤)
‚îÇ   ‚îÇ
‚îÇ   ‚îú‚îÄ‚îÄ styles.css                   # –í—Å—ñ —Å—Ç–∏–ª—ñ (~2700 —Ä—è–¥–∫—ñ–≤)
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –î–∏–∑–∞–π–Ω —Å—Ç–æ—Ä—ñ–Ω–æ–∫
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ê–Ω—ñ–º–∞—Ü—ñ—ó
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ –ê–¥–∞–ø—Ç–∏–≤–Ω—ñ—Å—Ç—å (mobile/tablet/desktop)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ –¢–µ–º–∏ —Ç–∞ –∫–æ–ª—å–æ—Ä–∏
‚îÇ   ‚îÇ
‚îÇ   ‚îî‚îÄ‚îÄ üìÇ images/                   # –õ–æ–≥–æ—Ç–∏–ø–∏ —Ç–∞ —ñ–∫–æ–Ω–∫–∏
‚îÇ       ‚îú‚îÄ‚îÄ logo_aitada.png          # –ì–æ–ª–æ–≤–Ω–∏–π –ª–æ–≥–æ—Ç–∏–ø AI
‚îÇ       ‚îú‚îÄ‚îÄ icon_ai2.png             # –Ü–∫–æ–Ω–∫–∞ AI
‚îÇ       ‚îî‚îÄ‚îÄ icon_search.png          # –Ü–∫–æ–Ω–∫–∞ –ø–æ—à—É–∫—É
‚îÇ
‚îú‚îÄ‚îÄ üìÇ elasticsearch/                # ELASTICSEARCH
‚îÇ   ‚îî‚îÄ‚îÄ Dockerfile                   # ES –∑ –ø–ª–∞–≥—ñ–Ω–æ–º —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml               # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è –≤—Å—ñ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤
‚îú‚îÄ‚îÄ nginx.conf                       # –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –≤–µ–±-—Å–µ—Ä–≤–µ—Ä–∞
‚îÇ
‚îî‚îÄ‚îÄ üìÇ docs/                         # –î–æ–¥–∞—Ç–∫–æ–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è
    ‚îú‚îÄ‚îÄ API_DOCUMENTATION.md
    ‚îú‚îÄ‚îÄ ARCHITECTURE.md
    ‚îú‚îÄ‚îÄ DEPLOYMENT_GUIDE.md
    ‚îî‚îÄ‚îÄ FAQ.md
```

### –©–æ –∑–Ω–∞—Ö–æ–¥–∏—Ç—å—Å—è –≤ –∫–æ–∂–Ω–æ–º—É —Ñ–∞–π–ª—ñ:

#### `backend/main.py` ‚Äî –º–æ–∑–æ–∫ —Å–∏—Å—Ç–µ–º–∏

```python
# –û—Å–Ω–æ–≤–Ω—ñ –∫–ª–∞—Å–∏:

class Settings:           # –í—Å—ñ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑ .env

class EmbeddingManager:   # –ì–µ–Ω–µ—Ä—É—î –≤–µ–∫—Ç–æ—Ä–Ω—ñ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É
    ‚îî‚îÄ‚îÄ generate_embedding(text)  # "–æ–ª—ñ–≤—Ü—ñ" ‚Üí [0.23, -0.45, 0.67, ...]

class GPTIntegration:     # –†–æ–±–æ—Ç–∞ –∑ ChatGPT
    ‚îú‚îÄ‚îÄ analyze_query()   # –ê–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
    ‚îî‚îÄ‚îÄ generate_recommendations()  # –ì–µ–Ω–µ—Ä—É—î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

class SearchEngine:       # –ì–æ–ª–æ–≤–Ω–∞ –ª–æ–≥—ñ–∫–∞ –ø–æ—à—É–∫—É
    ‚îú‚îÄ‚îÄ hybrid_search()   # –ö–æ–º–±—ñ–Ω–æ–≤–∞–Ω–∏–π –ø–æ—à—É–∫ (—Ç–µ–∫—Å—Ç + –≤–µ–∫—Ç–æ—Ä–∏)
    ‚îú‚îÄ‚îÄ vector_search()   # –¢—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫
    ‚îî‚îÄ‚îÄ bm25_search()     # –¢—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫

class LRUCache:          # –ö–µ—à –¥–ª—è —à–≤–∏–¥–∫–æ—Å—Ç—ñ
    ‚îî‚îÄ‚îÄ –ó–±–µ—Ä—ñ–≥–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏, —â–æ–± –Ω–µ –ø–µ—Ä–µ—Ä–∞—Ö–æ–≤—É–≤–∞—Ç–∏

# API endpoints (—â–æ –º–æ–∂–Ω–∞ –≤–∏–∫–ª–∏–∫–∞—Ç–∏):
POST /search                  # –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
POST /chat-search             # AI —á–∞—Ç-–ø–æ—à—É–∫
GET  /chat/search/sse         # AI –ø–æ—à—É–∫ –∑ –ø–æ—Ç–æ–∫–æ–≤–æ—é –ø–µ—Ä–µ–¥–∞—á–µ—é
POST /recommendations         # –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –Ω–∞ –æ—Å–Ω–æ–≤—ñ –∫–æ—à–∏–∫–∞
GET  /health                  # –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∑–¥–æ—Ä–æ–≤'—è —Å–∏—Å—Ç–µ–º–∏
GET  /stats                   # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
POST /cache/clear             # –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à
```

#### `web/scripts.js` ‚Äî –ª–æ–≥—ñ–∫–∞ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É

```javascript
// –û—Å–Ω–æ–≤–Ω—ñ —Ñ—É–Ω–∫—Ü—ñ—ó:

performSimpleSearch()        // –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
performChatSearch()          // AI —á–∞—Ç-–ø–æ—à—É–∫
handleSSEStream()            // –û–±—Ä–æ–±–∫–∞ –ø–æ—Ç–æ–∫—É –¥–∞–Ω–∏—Ö –≤—ñ–¥ AI
renderProductCard()          // –ú–∞–ª—é—î –∫–∞—Ä—Ç–∫—É —Ç–æ–≤–∞—Ä—É
addToCart()                  // –î–æ–¥–∞—Ç–∏ –≤ –∫–æ—à–∏–∫
updateCartUI()               // –û–Ω–æ–≤–∏—Ç–∏ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è –∫–æ—à–∏–∫–∞
loadMoreProducts()           // –î–æ–≥—Ä—É–∑–∏—Ç–∏ —â–µ —Ç–æ–≤–∞—Ä–∏
```

---

## üîß –Ø–∫ –ø—Ä–∞—Ü—é—î —Å–∏—Å—Ç–µ–º–∞ (–∞—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞)

### –°—Ö–µ–º–∞ –≤–∑–∞—î–º–æ–¥—ñ—ó –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ñ–≤:

```
–ö–û–†–ò–°–¢–£–í–ê–ß
    ‚Üì (–≤—ñ–¥–∫—Ä–∏–≤–∞—î –±—Ä–∞—É–∑–µ—Ä)
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ    NGINX (–ø–æ—Ä—Ç 8080)            ‚îÇ  ‚Üê –í–µ–±-—Å–µ—Ä–≤–µ—Ä
‚îÇ  - –í—ñ–¥–¥–∞—î HTML/CSS/JS           ‚îÇ
‚îÇ  - –ü—Ä–æ–∫—Å—É—î –∑–∞–ø–∏—Ç–∏ –¥–æ API        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ –°—Ç–∞—Ç–∏—á–Ω—ñ —Ñ–∞–π–ª–∏ (web/) ‚Üí –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Å—Ç–æ—Ä—ñ–Ω–∫—É
         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ API –∑–∞–ø–∏—Ç–∏ (/search, /chat-search) ‚Üí
                ‚Üì
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  FastAPI (–ø–æ—Ä—Ç 8000)     ‚îÇ  ‚Üê Python Backend
         ‚îÇ  - –û–±—Ä–æ–±–∫–∞ –∑–∞–ø–∏—Ç—ñ–≤       ‚îÇ
         ‚îÇ  - –õ–æ–≥—ñ–∫–∞ –ø–æ—à—É–∫—É         ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
              ‚îÇ          ‚îÇ
              ‚îÇ          ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚Üí –ó–û–í–ù–Ü–®–ù–Ü API:
              ‚îÇ                  ‚îú‚îÄ OpenAI GPT-4 (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)
              ‚îÇ                  ‚îî‚îÄ Embedding API (–≤–µ–∫—Ç–æ—Ä–∏)
              ‚Üì
         ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚îÇ  Elasticsearch (9200)    ‚îÇ  ‚Üê –ë–∞–∑–∞ –¥–∞–Ω–∏—Ö
         ‚îÇ  - –ó–±–µ—Ä—ñ–≥–∞—î —Ç–æ–≤–∞—Ä–∏       ‚îÇ
         ‚îÇ  - –í–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ (kNN) ‚îÇ
         ‚îÇ  - –¢–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ (BM25)‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### –ü—Ä–∏–∫–ª–∞–¥ —Ä–æ–±–æ—Ç–∏ AI —á–∞—Ç-–ø–æ—à—É–∫—É:

```
1. –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á: "–©–æ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ –¥–∏—Ç–∏–Ω—ñ –Ω–∞ 5 —Ä–æ–∫—ñ–≤?"
   
2. Frontend (scripts.js):
   ‚îî‚îÄ‚Üí –í—ñ–¥–ø—Ä–∞–≤–ª—è—î –∑–∞–ø–∏—Ç –Ω–∞ /chat/search/sse
   
3. Backend (main.py):
   ‚îú‚îÄ‚Üí GPTIntegration: –ê–Ω–∞–ª—ñ–∑—É—î –∑–∞–ø–∏—Ç
   ‚îÇ   ‚îî‚îÄ‚Üí –†–µ–∑—É–ª—å—Ç–∞—Ç: "product_search" (—à—É–∫–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏)
   ‚îÇ   ‚îî‚îÄ‚Üí –ü—ñ–¥–∑–∞–ø–∏—Ç–∏: ["—ñ–≥—Ä–∞—à–∫–∏ –¥–ª—è 5 —Ä–æ–∫—ñ–≤", "—Ä–æ–∑–≤–∏–≤–∞—é—á—ñ —ñ–≥—Ä–∏", "–∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∏"]
   ‚îÇ
   ‚îú‚îÄ‚Üí EmbeddingManager: –ì–µ–Ω–µ—Ä—É—î –≤–µ–∫—Ç–æ—Ä–∏ –¥–ª—è –∫–æ–∂–Ω–æ–≥–æ –ø—ñ–¥–∑–∞–ø–∏—Ç—É
   ‚îÇ   ‚îî‚îÄ‚Üí "—ñ–≥—Ä–∞—à–∫–∏ –¥–ª—è 5 —Ä–æ–∫—ñ–≤" ‚Üí [0.12, -0.34, 0.56, ...]
   ‚îÇ
   ‚îú‚îÄ‚Üí SearchEngine: –®—É–∫–∞—î –≤ Elasticsearch
   ‚îÇ   ‚îú‚îÄ‚Üí –í–µ–∫—Ç–æ—Ä–Ω–∏–π –ø–æ—à—É–∫ (—Å—Ö–æ–∂—ñ—Å—Ç—å –∑–∞ –∑–º—ñ—Å—Ç–æ–º)
   ‚îÇ   ‚îú‚îÄ‚Üí –¢–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ (—Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è —Å–ª—ñ–≤)
   ‚îÇ   ‚îî‚îÄ‚Üí –û–±'—î–¥–Ω—É—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏
   ‚îÇ
   ‚îú‚îÄ‚Üí –§—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è: –ó–∞–ª–∏—à–∞—î —Ç—ñ–ª—å–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
   ‚îÇ
   ‚îî‚îÄ‚Üí GPTIntegration: –ì–µ–Ω–µ—Ä—É—î —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
       ‚îî‚îÄ‚Üí "–†–µ–∫–æ–º–µ–Ω–¥—É—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä LEGO Duplo ‚Äî —ñ–¥–µ–∞–ª—å–Ω–æ –¥–ª—è —Ü—å–æ–≥–æ –≤—ñ–∫—É..."
   
4. Frontend –æ—Ç—Ä–∏–º—É—î:
   ‚îú‚îÄ‚Üí –¢–æ–≤–∞—Ä–∏ (–ø–æ –æ–¥–Ω–æ–º—É, –≤ —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ)
   ‚îî‚îÄ‚Üí –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó AI

5. –í—ñ–¥–æ–±—Ä–∞–∂–∞—î —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—É
```

---

## üöÄ –Ø–∫ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –ø—Ä–æ–µ–∫—Ç

### –ö—Ä–æ–∫ 1: –ü—ñ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é –ø—Ä–æ–µ–∫—Ç—É
cd /var/docker/AI/EmbeddingsQwen3

# –°—Ç–≤–æ—Ä–∏—Ç–∏ –º–µ—Ä–µ–∂—É Docker (—â–æ–± –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –±–∞—á–∏–ª–∏ –æ–¥–∏–Ω –æ–¥–Ω–æ–≥–æ)
docker network create embeddingsqwen3_semantic-search-net

# –°—Ç–≤–æ—Ä–∏—Ç–∏ volume (–¥–ª—è –∑–±–µ—Ä–µ–∂–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö Elasticsearch)
docker volume create embeddingsqwen3_elasticsearch-data
```

### –ö—Ä–æ–∫ 2: –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ .env —Ñ–∞–π–ª

–°—Ç–≤–æ—Ä–∏—Ç–∏ —Ñ–∞–π–ª `backend/.env` –∑ —Ç–∞–∫–∏–º–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏:

```env
#========================================
# –û–ë–û–í'–Ø–ó–ö–û–í–Ü –ù–ê–õ–ê–®–¢–£–í–ê–ù–ù–Ø
#========================================

# Elasticsearch (–±–∞–∑–∞ –¥–∞–Ω–∏—Ö –¥–ª—è –ø–æ—à—É–∫—É)
ELASTIC_URL=http://elasticsearch-qwen3:9200
INDEX_NAME=products_qwen3_8b

# Embedding API (–≥–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä—ñ–≤) ‚Äî –ó–ê–ú–Ü–ù–ò–¢–ò –Ω–∞ —Å–≤—ñ–π IP!
EMBEDDING_API_URL=http://10.2.0.171:9001/api/embeddings
OLLAMA_MODEL_NAME=dengcao/Qwen3-Embedding-8B:Q8_0

# OpenAI (–¥–ª—è AI –∞—Å–∏—Å—Ç–µ–Ω—Ç–∞) ‚Äî –í–°–¢–ê–í–ò–¢–ò —Å–≤—ñ–π –∫–ª—é—á!
OPENAI_API_KEY=sk-proj-your-actual-key-here
ENABLE_GPT_CHAT=true
GPT_MODEL=gpt-4o-mini

# TA-DA API (–¥–∞–Ω—ñ —Ç–æ–≤–∞—Ä—ñ–≤) ‚Äî –í–°–¢–ê–í–ò–¢–ò —Ç–æ–∫–µ–Ω!
TA_DA_API_TOKEN=your-ta-da-token-here
TA_DA_API_BASE_URL=https://api.ta-da.net.ua/v1.2/mobile
TA_DA_DEFAULT_SHOP_ID=8

#========================================
# –û–ü–¶–Ü–û–ù–ê–õ–¨–ù–Ü (–º–æ–∂–Ω–∞ –∑–∞–ª–∏—à–∏—Ç–∏ —è–∫ —î)
#========================================

# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—É–∫—É
HYBRID_ALPHA=0.7                    # –í–∞–≥–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É (0.0 = —Ç—ñ–ª—å–∫–∏ —Ç–µ–∫—Å—Ç, 1.0 = —Ç—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä–∏)
KNN_NUM_CANDIDATES=500              # –°–∫—ñ–ª—å–∫–∏ –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤ –±—Ä–∞—Ç–∏ –¥–ª—è –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É
BM25_MIN_SCORE=5.0                  # –ú—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π score –¥–ª—è —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ—à—É–∫—É

# –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å
EMBED_CACHE_SIZE=2000               # –°–∫—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä—ñ–≤ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏ –≤ –∫–µ—à—ñ
CACHE_TTL_SECONDS=3600              # –ß–∞—Å –∂–∏—Ç—Ç—è –∫–µ—à—É (1 –≥–æ–¥–∏–Ω–∞)
EMBEDDING_MAX_CONCURRENT=2          # –°–∫—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä—ñ–≤ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –æ–¥–Ω–æ—á–∞—Å–Ω–æ

# –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å
INITIAL_PRODUCTS_BATCH=20           # –°–∫—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –ø–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Å–ø–æ—á–∞—Ç–∫—É
LOAD_MORE_BATCH_SIZE=20             # –°–∫—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –ø—ñ–¥–≤–∞–Ω—Ç–∞–∂—É–≤–∞—Ç–∏ –ø—Ä–∏ –ø—Ä–æ–∫—Ä—É—Ç—Ü—ñ
```

### –ö—Ä–æ–∫ 3: –ó–∞–ø—É—Å—Ç–∏—Ç–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –≤—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏ (Elasticsearch, API, Nginx)
docker-compose up -d

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –≤—Å–µ –∑–∞–ø—É—Å—Ç–∏–ª–æ—Å—è
docker-compose ps

# –ü–æ–≤–∏–Ω–Ω–æ –±—É—Ç–∏:
# elasticsearch-qwen3   Up (healthy)
# api_qwen3             Up
# tada-nginx            Up
```

### –ö—Ä–æ–∫ 4: –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Ç–æ–≤–∞—Ä–∏

```bash
# –Ü–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏ (–ø–µ—Ä—à–∏–π —Ä–∞–∑ –∞–±–æ –ø–æ–≤–Ω–∞ –ø–µ—Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è)
docker exec -it api_qwen3 python reindex_products.py

# –ü—Ä–æ–≥—Ä–µ—Å –±—É–¥–µ –ø–æ–∫–∞–∑–∞–Ω–æ –≤ –∫–æ–Ω—Å–æ–ª—ñ
# –ü—ñ—Å–ª—è –∑–∞–≤–µ—Ä—à–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä–∏ –±—É–¥—É—Ç—å –≤ Elasticsearch
```

### –ö—Ä–æ–∫ 5: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–¥–æ—Ä–æ–≤'—è API
curl http://localhost:8080/health

# –í—ñ–¥–ø–æ–≤—ñ–¥—å –ø–æ–≤–∏–Ω–Ω–∞ –±—É—Ç–∏:
# {"status": "healthy", "elasticsearch": "connected", ...}

# –í—ñ–¥–∫—Ä–∏—Ç–∏ –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
open http://localhost:8080
```

**–ì–æ—Ç–æ–≤–æ!** –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∞—Ü—é—î –Ω–∞ `http://localhost:8080`

---

## üí° –©–æ –º–æ–∂–Ω–∞ —Ä–æ–±–∏—Ç–∏ –∑ –ø—Ä–æ–µ–∫—Ç–æ–º

### 1. –ü–µ—Ä–µ–≥–ª—è–¥–∞—Ç–∏ –ª–æ–≥–∏ –ø–æ—à—É–∫—É

```bash
# –ß–∏—Ç–∞–±–µ–ª—å–Ω—ñ –ª–æ–≥–∏ (–¥–ª—è –ª—é–¥–µ–π)
docker exec -it api_qwen3 cat search_logs/search_queries_readable.txt

# JSON –ª–æ–≥–∏ (–¥–ª—è –ø—Ä–æ–≥—Ä–∞–º–Ω–æ—ó –æ–±—Ä–æ–±–∫–∏)
docker exec -it api_qwen3 cat search_logs/search_queries.json

# –ß–µ—Ä–µ–∑ API (–æ—Ç—Ä–∏–º–∞—Ç–∏ –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ—ó —Å–µ—Å—ñ—ó)
curl http://localhost:8080/search-logs/session/YOUR-SESSION-ID

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –≤—Å—ñ—Ö –ø–æ—à—É–∫—ñ–≤
curl http://localhost:8080/search-logs/stats
```

**–©–æ –ª–æ–≥—É—î—Ç—å—Å—è:**
- –í—Å—ñ –∑–∞–ø–∏—Ç–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
- –ó–Ω–∞–π–¥–µ–Ω—ñ —Ç–æ–≤–∞—Ä–∏ —Ç–∞ —ó—Ö score
- –°–∫—ñ–ª—å–∫–∏ —á–∞—Å—É –∑–∞–π–Ω—è–≤ –ø–æ—à—É–∫
- –Ø–∫—ñ –ø—ñ–¥–∑–∞–ø–∏—Ç–∏ –∑–≥–µ–Ω–µ—Ä—É–≤–∞–≤ AI
- –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó

### 2. –î–æ–¥–∞–≤–∞—Ç–∏/–æ–Ω–æ–≤–ª—é–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏

**–í–∞—Ä—ñ–∞–Ω—Ç –ê: –û–Ω–æ–≤–∏—Ç–∏ —ñ—Å–Ω—É—é—á—ñ —Ç–æ–≤–∞—Ä–∏**

```bash
# 1. –í—ñ–¥—Ä–µ–¥–∞–≥—É–≤–∞—Ç–∏ backend/products.json
nano backend/products.json

# 2. –†–µ—ñ–Ω–¥–µ–∫—Å—É–≤–∞—Ç–∏ (–±–µ–∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Å—Ç–∞—Ä–∏—Ö)
docker exec -it api_qwen3 python reindex_products.py --update
```

**–í–∞—Ä—ñ–∞–Ω—Ç –ë: –ü–æ–≤–Ω–∞ –ø–µ—Ä–µ—ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è**

```bash
# –í–∏–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä–∏–π —ñ–Ω–¥–µ–∫—Å —Ç–∞ —Å—Ç–≤–æ—Ä–∏—Ç—å –Ω–æ–≤–∏–π
docker exec -it api_qwen3 python reindex_products.py
```

**–í–∞—Ä—ñ–∞–Ω—Ç –í: –ó–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ –∑ —Ñ–∞–π–ª—É**

```bash
# –Ø–∫—â–æ —Ñ–∞–π–ª —Ç–æ–≤–∞—Ä—ñ–≤ –≤ —ñ–Ω—à–æ–º—É –º—ñ—Å—Ü—ñ
docker exec -it api_qwen3 python reindex_products.py --file /path/to/new_products.json
```

### 3. –ù–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –∞–ª–≥–æ—Ä–∏—Ç–º –ø–æ—à—É–∫—É

**–ó–º—ñ–Ω–∞ –±–∞–ª–∞–Ω—Å—É –º—ñ–∂ —Ç–µ–∫—Å—Ç–æ–≤–∏–º —Ç–∞ –≤–µ–∫—Ç–æ—Ä–Ω–∏–º –ø–æ—à—É–∫–æ–º:**

```env
# –£ —Ñ–∞–π–ª—ñ backend/.env

# –ë—ñ–ª—å—à–µ –≤–∞–≥–∏ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É –ø–æ—à—É–∫—É (–∫—Ä–∞—â–µ —Ä–æ–∑—É–º—ñ—î —Å–µ–Ω—Å)
HYBRID_ALPHA=0.8

# –ë—ñ–ª—å—à–µ –≤–∞–≥–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –ø–æ—à—É–∫—É (–∫—Ä–∞—â–µ —à—É–∫–∞—î —Ç–æ—á–Ω—ñ —Å–ª–æ–≤–∞)
HYBRID_ALPHA=0.3

# –ü–æ—Ä—ñ–≤–Ω—É
HYBRID_ALPHA=0.5
```

**–ó–º—ñ–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤:**

```env
# –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –¥—É–∂–µ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.6

# –ü–æ–∫–∞–∑—É–≤–∞—Ç–∏ –±—ñ–ª—å—à–µ —Ç–æ–≤–∞—Ä—ñ–≤ (–º–µ–Ω—à —Å—Ç—Ä–æ–≥–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è)
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.3
```

### 4. –ó–º—ñ–Ω—é–≤–∞—Ç–∏ –ø—Ä–æ–º–ø—Ç–∏ –¥–ª—è AI

–§–∞–π–ª: `backend/main.py`

**–ü—Ä–æ–º–ø—Ç –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É –∑–∞–ø–∏—Ç—ñ–≤:**

```python
# –ó–Ω–∞–π—Ç–∏ –º–µ—Ç–æ–¥: _build_analyze_system_prompt()
# –ü—Ä–∏–±–ª–∏–∑–Ω–æ —Ä—è–¥–æ–∫ 1100

def _build_analyze_system_prompt(self) -> str:
    return """
    –¢–∏ ‚Äî –∞—Å–∏—Å—Ç–µ–Ω—Ç –¥–ª—è —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-–º–∞–≥–∞–∑–∏–Ω—É TA-DA.
    
    –¢–≤–æ—î –∑–∞–≤–¥–∞–Ω–Ω—è: –ø—Ä–æ–∞–Ω–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –∑–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞...
    
    # –ú–û–ñ–ù–ê –ó–ú–Ü–ù–ò–¢–ò –¶–ï–ô–ü–†–û–ú–ü–¢
    """
```

**–ü—Ä–æ–º–ø—Ç –¥–ª—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π:**

```python
# –ó–Ω–∞–π—Ç–∏ –º–µ—Ç–æ–¥: _build_recommendation_system_prompt()
# –ü—Ä–∏–±–ª–∏–∑–Ω–æ —Ä—è–¥–æ–∫ 1300

def _build_recommendation_system_prompt(self) -> str:
    return """
    –ù–∞ –æ—Å–Ω–æ–≤—ñ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä—ñ–≤ –¥–∞–π –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó...
    
    # –ú–û–ñ–ù–ê –ó–ú–Ü–ù–ò–¢–ò –¶–ï–ô –ü–†–û–ú–ü–¢
    """
```

–ü—ñ—Å–ª—è –∑–º—ñ–Ω:

```bash
docker-compose restart api
```

### 5. –ó–º—ñ–Ω—é–≤–∞—Ç–∏ –¥–∏–∑–∞–π–Ω

**–ö–æ–ª—å–æ—Ä–∏ —Ç–∞ —Å—Ç–∏–ª—ñ:**

```css
/* –§–∞–π–ª: web/styles.css */

:root {
    --primary-color: #4a90e2;      /* –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–ª—ñ—Ä */
    --secondary-color: #7b68ee;    /* –í—Ç–æ—Ä–∏–Ω–Ω–∏–π –∫–æ–ª—ñ—Ä */
    --background: #f8f9fa;         /* –§–æ–Ω */
    /* –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –±—É–¥—å-—è–∫–∏–π –∫–æ–ª—ñ—Ä */
}
```

**–¢–µ–∫—Å—Ç –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞—Ö:**

```html
<!-- –§–∞–π–ª: web/index.html -->

<!-- –ó–Ω–∞–π—Ç–∏ —Ç–∞ –∑–º—ñ–Ω–∏—Ç–∏ –±—É–¥—å-—è–∫–∏–π —Ç–µ–∫—Å—Ç -->
<h1>–°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ TA-DA!</h1>
```

–ó–º—ñ–Ω–∏ –∑–∞—Å—Ç–æ—Å—É—é—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ (–ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–∏—Ç–∏ —Å—Ç–æ—Ä—ñ–Ω–∫—É –≤ –±—Ä–∞—É–∑–µ—Ä—ñ).

### 6. –ú–æ–Ω—ñ—Ç–æ—Ä–∏—Ç–∏ —Å–∏—Å—Ç–µ–º—É

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ API
curl http://localhost:8080/stats

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∫–µ—à—É
curl http://localhost:8080/cache/stats

# –ó–¥–æ—Ä–æ–≤'—è Elasticsearch
curl http://localhost:9200/_cluster/health?pretty

# –°–∫—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ –≤ —ñ–Ω–¥–µ–∫—Å—ñ
curl http://localhost:9200/products_qwen3_8b/_count

# –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–µ—Å—É—Ä—Å—ñ–≤ Docker
docker stats
```

### 7. –†–æ–±–∏—Ç–∏ –±–µ–∫–∞–ø–∏

```bash
# –ë–µ–∫–∞–ø –ª–æ–≥—ñ–≤
docker cp api_qwen3:/app/search_logs ./backup_logs_$(date +%Y%m%d)

# –ë–µ–∫–∞–ø —Ç–æ–≤–∞—Ä—ñ–≤
docker cp api_qwen3:/app/products.json ./backup_products.json

# –ï–∫—Å–ø–æ—Ä—Ç —ñ–Ω–¥–µ–∫—Å—É Elasticsearch
curl -X PUT "localhost:9200/_snapshot/backup_repo/snapshot_$(date +%Y%m%d)?wait_for_completion=true"
```

### 8. –¢–µ—Å—Ç—É–≤–∞—Ç–∏ API

```bash
# –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫
curl -X POST http://localhost:8080/search \
  -H "Content-Type: application/json" \
  -d '{
    "query": "–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ",
    "k": 10,
    "search_type": "hybrid"
  }'

# AI —á–∞—Ç-–ø–æ—à—É–∫
curl -N http://localhost:8080/chat/search/sse?query=–ø–æ–¥–∞—Ä—É–Ω–æ–∫+–¥–∏—Ç–∏–Ω—ñ&session_id=test123

# –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
curl -X POST http://localhost:8080/recommendations \
  -H "Content-Type: application/json" \
  -d '{
    "cart_items": [
      {"uuid": "123", "title_ua": "–û–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ"}
    ],
    "session_id": "test"
  }'
```

---

## üîç –ö–æ—Ä–∏—Å–Ω—ñ –∫–æ–º–∞–Ω–¥–∏

### –†–æ–±–æ—Ç–∞ –∑ Docker

```bash
# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏
docker-compose logs -f                    # –í—Å—ñ —Å–µ—Ä–≤—ñ—Å–∏
docker-compose logs -f api                # –¢—ñ–ª—å–∫–∏ API
docker-compose logs -f elasticsearch      # –¢—ñ–ª—å–∫–∏ Elasticsearch
docker-compose logs --tail=100 api        # –û—Å—Ç–∞–Ω–Ω—ñ 100 —Ä—è–¥–∫—ñ–≤

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose restart api                # –¢—ñ–ª—å–∫–∏ API
docker-compose restart                    # –í—Å–µ

# –ó—É–ø–∏–Ω–∏—Ç–∏
docker-compose stop                       # –ó—É–ø–∏–Ω–∏—Ç–∏ (–¥–∞–Ω—ñ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è)
docker-compose down                       # –ó—É–ø–∏–Ω–∏—Ç–∏ —Ç–∞ –≤–∏–¥–∞–ª–∏—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker-compose down -v                    # –£–í–ê–ì–ê! –í–∏–¥–∞–ª–∏—Ç—å —Ç–∞–∫–æ–∂ –¥–∞–Ω—ñ Elasticsearch

# –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏
docker-compose build --no-cache           # –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –æ–±—Ä–∞–∑–∏
docker-compose up -d --build              # –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ —Ç–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏
```

### –†–æ–±–æ—Ç–∞ –∑ API –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–º

```bash
# –£–≤—ñ–π—Ç–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
docker exec -it api_qwen3 bash

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞
docker exec -it api_qwen3 env

# –ü–µ—Ä–µ–≥–ª—è–Ω—É—Ç–∏ —Ñ–∞–π–ª–∏
docker exec -it api_qwen3 ls -la

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏ Python
docker exec -it api_qwen3 cat /app/app.log

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Python –∫–æ–º–∞–Ω–¥—É
docker exec -it api_qwen3 python -c "print('Hello')"
```

### –†–æ–±–æ—Ç–∞ –∑ Elasticsearch

```bash
# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ –∫–ª–∞—Å—Ç–µ—Ä
curl http://localhost:9200

# –°–ø–∏—Å–æ–∫ —ñ–Ω–¥–µ–∫—Å—ñ–≤
curl http://localhost:9200/_cat/indices?v

# –Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è –ø—Ä–æ —ñ–Ω–¥–µ–∫—Å —Ç–æ–≤–∞—Ä—ñ–≤
curl http://localhost:9200/products_qwen3_8b

# –°–∫—ñ–ª—å–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ñ–≤
curl http://localhost:9200/products_qwen3_8b/_count

# –ü—Ä–∏–∫–ª–∞–¥ –¥–æ–∫—É–º–µ–Ω—Ç–∞
curl http://localhost:9200/products_qwen3_8b/_search?size=1&pretty

# –í–∏–¥–∞–ª–∏—Ç–∏ —ñ–Ω–¥–µ–∫—Å (–£–í–ê–ì–ê! –í–∏–¥–∞–ª–∏—Ç—å –≤—Å—ñ —Ç–æ–≤–∞—Ä–∏)
curl -X DELETE http://localhost:9200/products_qwen3_8b

# –û—á–∏—Å—Ç–∏—Ç–∏ –∫–µ—à Elasticsearch
curl -X POST http://localhost:9200/products_qwen3_8b/_cache/clear
```

---

## ‚ö†Ô∏è –¢–∏–ø–æ–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏ —Ç–∞ —Ä—ñ—à–µ–Ω–Ω—è

### –ü—Ä–æ–±–ª–µ–º–∞ 1: Elasticsearch –Ω–µ –∑–∞–ø—É—Å–∫–∞—î—Ç—å—Å—è

**–°–∏–º–ø—Ç–æ–º–∏:**

```bash
docker-compose logs elasticsearch
# Error: max virtual memory areas vm.max_map_count [65530] is too low
```

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# –ó–±—ñ–ª—å—à–∏—Ç–∏ vm.max_map_count
sudo sysctl -w vm.max_map_count=262144

# –ó—Ä–æ–±–∏—Ç–∏ –ø–æ—Å—Ç—ñ–π–Ω–∏–º (—â–æ–± –Ω–µ —Å–∫–∏–¥–∞–ª–æ—Å—å –ø—ñ—Å–ª—è –ø–µ—Ä–µ–∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è)
echo "vm.max_map_count=262144" | sudo tee -a /etc/sysctl.conf
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: API –Ω–µ –º–æ–∂–µ –∑'—î–¥–Ω–∞—Ç–∏—Å—è –∑ Elasticsearch

**–°–∏–º–ø—Ç–æ–º–∏:**

```bash
curl http://localhost:8080/health
# {"elasticsearch": "disconnected"}
```

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ Elasticsearch –∑–∞–ø—É—â–µ–Ω–∏–π
docker-compose ps
curl http://localhost:9200

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –º–µ—Ä–µ–∂—É
docker network inspect embeddingsqwen3_semantic-search-net

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ API
docker-compose restart api
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: Embedding API –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π

**–°–∏–º–ø—Ç–æ–º–∏:**

```bash
docker-compose logs api
# Error connecting to embedding API: Connection refused
```

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å Embedding API
curl http://10.2.0.171:9001/api/embeddings

# 2. –Ø–∫—â–æ IP –∑–º—ñ–Ω–∏–≤—Å—è ‚Äî –æ–Ω–æ–≤–∏—Ç–∏ .env
nano backend/.env
# EMBEDDING_API_URL=http://NEW-IP:9001/api/embeddings

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose restart api
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: –ü–æ–≤—ñ–ª—å–Ω–∏–π –ø–æ—à—É–∫

**–†—ñ—à–µ–Ω–Ω—è:**

```env
# –£ backend/.env –∑–±—ñ–ª—å—à–∏—Ç–∏ –∫–µ—à

EMBED_CACHE_SIZE=5000              # –ë—ñ–ª—å—à–∏–π –∫–µ—à –≤–µ–∫—Ç–æ—Ä—ñ–≤
EMBEDDING_MAX_CONCURRENT=5         # –ë—ñ–ª—å—à–µ –ø–∞—Ä–∞–ª–µ–ª—å–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
```

```bash
# –û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä–∏–π –∫–µ—à
curl -X POST http://localhost:8080/cache/clear

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose restart api
```

### –ü—Ä–æ–±–ª–µ–º–∞ 5: GPT –Ω–µ –ø—Ä–∞—Ü—é—î

**–°–∏–º–ø—Ç–æ–º–∏:**

```bash
docker-compose logs api | grep GPT
# OpenAI API error: Invalid API key
```

**–†—ñ—à–µ–Ω–Ω—è:**

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ API key
docker exec -it api_qwen3 env | grep OPENAI_API_KEY

# 2. –û–Ω–æ–≤–∏—Ç–∏ –∫–ª—é—á —É .env
nano backend/.env
# OPENAI_API_KEY=sk-proj-your-new-key

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏
docker-compose restart api
```

### –ü—Ä–æ–±–ª–µ–º–∞ 6: –ù–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

**–†—ñ—à–µ–Ω–Ω—è 1: –ü—ñ–¥–≤–∏—â–∏—Ç–∏ –ø–æ—Ä—ñ–≥ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó**

```env
# backend/.env
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.5   # –ë—ñ–ª—å—à —Å—Ç—Ä–æ–≥–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è
```

**–†—ñ—à–µ–Ω–Ω—è 2: –ó–º—ñ–Ω–∏—Ç–∏ –±–∞–ª–∞–Ω—Å –ø–æ—à—É–∫—É**

```env
# –ë—ñ–ª—å—à–µ –≤–∞–≥–∏ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –ø–æ—à—É–∫—É (—Ç–æ—á–Ω—ñ —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è)
HYBRID_ALPHA=0.4

# –ê–±–æ –±—ñ–ª—å—à–µ –≤–µ–∫—Ç–æ—Ä–Ω–æ–º—É (—Å–µ–º–∞–Ω—Ç–∏—á–Ω–∞ —Å—Ö–æ–∂—ñ—Å—Ç—å)
HYBRID_ALPHA=0.8
```

---

## üìä –©–æ –∫–æ–Ω—Ç—Ä–æ–ª—é–≤–∞—Ç–∏ –≤ production

### –©–æ–¥–Ω—è:

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å
docker-compose ps

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–¥–æ—Ä–æ–≤'—è
curl http://localhost:8080/health

# –ü–æ–¥–∏–≤–∏—Ç–∏—Å—å –ª–æ–≥–∏ –ø–æ–º–∏–ª–æ–∫
docker-compose logs --tail=100 api | grep ERROR
```

### –©–æ—Ç–∏–∂–Ω—è:

```bash
# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ—à—É–∫—É
curl http://localhost:8080/stats

# –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ Elasticsearch
curl http://localhost:9200/_cluster/stats?pretty

# –†–æ–∑–º—ñ—Ä —ñ–Ω–¥–µ–∫—Å—É
curl http://localhost:9200/_cat/indices?v

# –ë–µ–∫–∞–ø –ª–æ–≥—ñ–≤
docker cp api_qwen3:/app/search_logs ./backup_logs_$(date +%Y%m%d)
```

### –©–æ–º—ñ—Å—è—Ü—è:

```bash
# –ü–æ–≤–Ω–∏–π –±–µ–∫–∞–ø
docker cp api_qwen3:/app/search_logs ./monthly_backup/
docker cp api_qwen3:/app/products.json ./monthly_backup/

# –û—á–∏—Å—Ç–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –ª–æ–≥–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
docker exec -it api_qwen3 rm search_logs/search_queries.json
docker exec -it api_qwen3 rm search_logs/search_queries_readable.txt
docker-compose restart api
```

### –ú–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –≤—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è:

- **Response time:** < 2 —Å–µ–∫ (–ø—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫), < 10 —Å–µ–∫ (AI –ø–æ—à—É–∫)
- **Cache hit rate:** > 60%
- **Elasticsearch heap:** < 75%
- **Disk space:** > 20% –≤—ñ–ª—å–Ω–æ–≥–æ –º—ñ—Å—Ü—è

---

## üìù –ß–µ–∫–ª–∏—Å—Ç –ø–µ—Ä–µ–¥–∞—á—ñ –ø—Ä–æ–µ–∫—Ç—É

### –¢–µ—Ö–Ω—ñ—á–Ω–∞ –ø—ñ–¥–≥–æ—Ç–æ–≤–∫–∞:

- [ ] –°–∫–æ–ø—ñ–π–æ–≤–∞–Ω–æ –≤—Å—é –¥–∏—Ä–µ–∫—Ç–æ—Ä—ñ—é `EmbeddingsQwen3/`
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ `backend/.env` –∑ —Ä–µ–∞–ª—å–Ω–∏–º–∏ —Ç–æ–∫–µ–Ω–∞–º–∏
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ –¥–æ—Å—Ç—É–ø–Ω—ñ—Å—Ç—å Embedding API
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ OpenAI API key
- [ ] –ü–µ—Ä–µ–≤—ñ—Ä–µ–Ω–æ TA-DA API token
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ Docker network: `embeddingsqwen3_semantic-search-net`
- [ ] –°—Ç–≤–æ—Ä–µ–Ω–æ Docker volume: `embeddingsqwen3_elasticsearch-data`

### –ó–∞–ø—É—Å–∫:

- [ ] –í–∏–∫–æ–Ω–∞–Ω–æ `docker-compose up -d`
- [ ] –í—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –ø—Ä–∞—Ü—é—é—Ç—å (`docker-compose ps`)
- [ ] API –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î: `curl http://localhost:8080/health`
- [ ] Elasticsearch –ø—Ä–∞—Ü—é—î: `curl http://localhost:9200`
- [ ] –¢–æ–≤–∞—Ä–∏ –ø—Ä–æ—ñ–Ω–¥–µ–∫—Å–æ–≤–∞–Ω—ñ: `docker exec -it api_qwen3 python reindex_products.py`
- [ ] –Ü–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ñ–¥–∫—Ä–∏–≤–∞—î—Ç—å—Å—è: `http://localhost:8080`

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è:

- [ ] –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫ –ø—Ä–∞—Ü—é—î
- [ ] AI —á–∞—Ç-–ø–æ—à—É–∫ –ø—Ä–∞—Ü—é—î
- [ ] –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –≥–µ–Ω–µ—Ä—É—é—Ç—å—Å—è
- [ ] –ö–æ—à–∏–∫ –ø—Ä–∞—Ü—é—î
- [ ] –õ–æ–≥–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è

### –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:

- [ ] –ü—Ä–æ—á–∏—Ç–∞–Ω–æ —Ü–µ–π —Ñ–∞–π–ª (HANDOVER.md)
- [ ] –ó—Ä–æ–∑—É–º—ñ–ª–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É
- [ ] –ó–Ω–∞—î–º–æ, –¥–µ –ª–æ–≥–∏
- [ ] –ó–Ω–∞—î–º–æ, —è–∫ —Ä–æ–±–∏—Ç–∏ –±–µ–∫–∞–ø–∏
- [ ] –ó–Ω–∞—î–º–æ, —è–∫ –¥–æ–¥–∞–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏

### –î–æ—Å—Ç—É–ø–∏ —Ç–∞ –∫–æ–Ω—Ç–∞–∫—Ç–∏:

- [ ] OpenAI API key: `_________________`
- [ ] TA-DA API token: `_________________`
- [ ] Embedding API: `http://10.2.0.171:9001`
- [ ] –ö–æ–Ω—Ç–∞–∫—Ç –¥–ª—è –ø—ñ–¥—Ç—Ä–∏–º–∫–∏: `_________________`

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç–∏

**–ü—Ä–æ–µ–∫—Ç:** –°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ TA-DA  
**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–î–∞—Ç–∞:** 13 –∂–æ–≤—Ç–Ω—è 2025  

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:**
- Python 3.11+
- Elasticsearch 8.11
- Docker 24+
- Qwen3-Embedding-8B (–∑–æ–≤–Ω—ñ—à–Ω—ñ–π API)
- OpenAI GPT-4o-mini

**–õ—ñ—Ü–µ–Ω–∑—ñ—è:** Proprietary (–≤–ª–∞—Å–Ω—ñ—Å—Ç—å TA-DA)

