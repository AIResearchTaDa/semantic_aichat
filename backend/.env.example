# ============================================================================
# EMBEDDINGS QWEN3 - CONFIGURATION FILE
# ============================================================================

# ============ ELASTICSEARCH & EMBEDDINGS ============
ELASTIC_URL=http://elasticsearch-qwen3:9200
EMBEDDING_API_URL=http://10.2.0.171:9001/api/embeddings
OLLAMA_MODEL_NAME=dengcao/Qwen3-Embedding-8B:Q8_0
INDEX_NAME=products_qwen3_8b
VECTOR_DIMENSION=4096
VECTOR_FIELD_NAME=description_vector

# Cache & Performance
EMBED_CACHE_SIZE=2000
CACHE_TTL_SECONDS=3600
REQUEST_TIMEOUT=40
MAX_RETRIES=3

# Search Parameters (ОПТИМІЗОВАНО для балансу якість/швидкість)
KNN_NUM_CANDIDATES=700
HYBRID_ALPHA=0.7
HYBRID_FUSION=weighted
BM25_MIN_SCORE=10.0

# Lazy Loading
INITIAL_PRODUCTS_BATCH=20
LOAD_MORE_BATCH_SIZE=20
SEARCH_RESULTS_TTL_SECONDS=3600

# Embedding Concurrency
EMBEDDING_MAX_CONCURRENT=3

# ============ GPT SETTINGS ============
OPENAI_API_KEY=your_openai_api_key_here
GPT_MODEL=gpt-4o-mini
ENABLE_GPT_CHAT=true
GPT_TEMPERATURE=0.3

# GPT Timeouts
GPT_ANALYZE_TIMEOUT_SECONDS=10.0
GPT_RECO_TIMEOUT_SECONDS=20.0

# GPT Tokens (збільшено для кращої якості відповідей)
GPT_MAX_TOKENS_ANALYZE=1500
GPT_MAX_TOKENS_RECO=2000

# ============ RECOMMENDATIONS ============
RECO_DETAILED_COUNT=3
GROUNDED_RECOMMENDATIONS=true

# ============ HISTORY ============
SEARCH_HISTORY_TTL_DAYS=7
MAX_SEARCH_HISTORY=20
MAX_CHAT_DISPLAY_ITEMS=100

# ============ TA-DA API (External) ============
TA_DA_API_BASE_URL=https://api.ta-da.net.ua/v1.2/mobile
TA_DA_API_TOKEN=your_ta_da_api_token_here
TA_DA_DEFAULT_SHOP_ID=8
TA_DA_DEFAULT_LANGUAGE=ua

# ============ CHAT SEARCH RELEVANCE ============
# ОПТИМІЗОВАНО з адаптивною логікою в коді
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.35
CHAT_SEARCH_MIN_SCORE_ABSOLUTE=0.3
CHAT_SEARCH_SUBQUERY_WEIGHT_DECAY=0.85
CHAT_SEARCH_MAX_K_PER_SUBQUERY=25