# ‚ùì FAQ ‚Äî –ü–æ—à–∏—Ä–µ–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

## –ó–º—ñ—Å—Ç
- [–ó–∞–≥–∞–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è](#–∑–∞–≥–∞–ª—å–Ω—ñ-–ø–∏—Ç–∞–Ω–Ω—è)
- [–¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è](#—Ç–µ—Ö–Ω—ñ—á–Ω—ñ-–ø–∏—Ç–∞–Ω–Ω—è)
- [–ü–æ—à—É–∫ —Ç–∞ AI](#–ø–æ—à—É–∫-—Ç–∞-ai)
- [–ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å](#–ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å)
- [Deployment](#deployment)
- [Troubleshooting](#troubleshooting)

---

## –ó–∞–≥–∞–ª—å–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

### –©–æ —Ç–∞–∫–µ —Å–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫?

–°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫ ‚Äî —Ü–µ —Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ—è, —è–∫–∞ —Ä–æ–∑—É–º—ñ—î **–∑–Ω–∞—á–µ–Ω–Ω—è** –∑–∞–ø–∏—Ç—É, –∞ –Ω–µ –ø—Ä–æ—Å—Ç–æ —à—É–∫–∞—î —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω–Ω—è —Å–ª—ñ–≤. 

**–ü—Ä–∏–∫–ª–∞–¥:**
- **–ö–ª–∞—Å–∏—á–Ω–∏–π –ø–æ—à—É–∫:** "—á–µ—Ä–≤–æ–Ω—ñ —á–µ—Ä–µ–≤–∏–∫–∏" –∑–Ω–∞–π–¥–µ —Ç—ñ–ª—å–∫–∏ —Ç–æ–≤–∞—Ä–∏ –∑ —Ü–∏–º–∏ —Å–ª–æ–≤–∞–º–∏
- **–°–µ–º–∞–Ω—Ç–∏—á–Ω–∏–π –ø–æ—à—É–∫:** "–≤–∑—É—Ç—Ç—è —á–µ—Ä–≤–æ–Ω–æ–≥–æ –∫–æ–ª—å–æ—Ä—É" –∑–Ω–∞–π–¥–µ "—á–µ—Ä–≤–æ–Ω—ñ —á–µ—Ä–µ–≤–∏–∫–∏", "—á–µ—Ä–≤–æ–Ω—ñ —Ç—É—Ñ–ª—ñ", "–≤–∑—É—Ç—Ç—è —á–µ—Ä–≤–æ–Ω–µ"

### –ß–æ–º—É –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è AI?

AI (GPT-4) –¥–æ–ø–æ–º–∞–≥–∞—î:
1. **–†–æ–∑—É–º—ñ—Ç–∏ —Å–∫–ª–∞–¥–Ω—ñ –∑–∞–ø–∏—Ç–∏:** "–©–æ –ø–æ–¥–∞—Ä—É–≤–∞—Ç–∏ –¥–∏—Ç–∏–Ω—ñ –Ω–∞ 5 —Ä–æ–∫—ñ–≤?"
2. **–ì–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –ø—ñ–¥–∑–∞–ø–∏—Ç–∏:** —Ä–æ–∑–±–∏–≤–∞—î —Å–∫–ª–∞–¥–Ω–∏–π –∑–∞–ø–∏—Ç –Ω–∞ –ø—Ä–æ—Å—Ç—ñ—à—ñ
3. **–î–∞–≤–∞—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:** –ø–æ—è—Å–Ω—é—î, —á–æ–º—É —Ç–æ–≤–∞—Ä –ø—ñ–¥—Ö–æ–¥–∏—Ç—å
4. **–í–µ—Å—Ç–∏ –¥—ñ–∞–ª–æ–≥:** –≤—Ä–∞—Ö–æ–≤—É—î –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å

### –Ø–∫–∞ —Ä—ñ–∑–Ω–∏—Ü—è –º—ñ–∂ –ø—Ä–æ—Å—Ç–∏–º —Ç–∞ AI –ø–æ—à—É–∫–æ–º?

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | –ü—Ä–æ—Å—Ç–∏–π –ø–æ—à—É–∫ | AI —á–∞—Ç-–ø–æ—à—É–∫ |
|----------------|---------------|--------------|
| –®–≤–∏–¥–∫—ñ—Å—Ç—å | ‚ö° –î—É–∂–µ —à–≤–∏–¥–∫–æ (300-500ms) | üê¢ –ü–æ–≤—ñ–ª—å–Ω—ñ—à–µ (2-4s) |
| –¢–æ—á–Ω—ñ—Å—Ç—å | ‚úÖ –í–∏—Å–æ–∫–∞ –¥–ª—è —Ç–æ—á–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ | ‚úÖ –í–∏—Å–æ–∫–∞ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ |
| –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó | ‚ùå –ù–µ–º–∞—î | ‚úÖ –Ñ –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–æ–≤–∞–Ω—ñ |
| –†–æ–∑—É–º—ñ–Ω–Ω—è –∫–æ–Ω—Ç–µ–∫—Å—Ç—É | ‚ùå –û–±–º–µ–∂–µ–Ω–µ | ‚úÖ –ü–æ–≤–Ω–µ |
| –í–∏—Ç—Ä–∞—Ç–∏ | üí∞ –î–µ—à–µ–≤–æ | üí∞üí∞ –î–æ—Ä–æ–∂—á–µ (GPT API) |

### –ß–∏ –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –º–æ—ó –ø–æ—à—É–∫–æ–≤—ñ –∑–∞–ø–∏—Ç–∏?

**–¢–∞–∫**, –∞–ª–µ –∞–Ω–æ–Ω—ñ–º–Ω–æ:
- –ó–∞–ø–∏—Ç–∏ –ª–æ–≥—É—é—Ç—å—Å—è –¥–ª—è –ø–æ–∫—Ä–∞—â–µ–Ω–Ω—è —è–∫–æ—Å—Ç—ñ
- –ó–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ session_id (–±–µ–∑ –æ—Å–æ–±–∏—Å—Ç–∏—Ö –¥–∞–Ω–∏—Ö)
- –õ–æ–≥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏
- TTL: 7 –¥–Ω—ñ–≤ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º

**–í–∏ –º–æ–∂–µ—Ç–µ –≤—ñ–¥–∫–ª—é—á–∏—Ç–∏ –ª–æ–≥—É–≤–∞–Ω–Ω—è** –≤ `.env`:
```env
ENABLE_SEARCH_LOGGING=false
```

---

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –ø–∏—Ç–∞–Ω–Ω—è

### –Ø–∫—ñ –º–æ–¥–µ–ª—ñ AI –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è?

1. **Qwen3-Embedding-8B (Q8_0)**
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è –≤–µ–∫—Ç–æ—Ä–Ω–∏—Ö embeddings
   - –†–æ–∑–º—ñ—Ä–Ω—ñ—Å—Ç—å: 4096 –≤–∏–º—ñ—Ä—ñ–≤
   - –®–≤–∏–¥–∫—ñ—Å—Ç—å: 200-300ms –Ω–∞ –∑–∞–ø–∏—Ç
   - –ü—ñ–¥—Ç—Ä–∏–º–∫–∞: –ë–∞–≥–∞—Ç–æ–º–æ–≤–Ω–∞ (–≤–∫–ª—é—á–Ω–æ –∑ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—é)

2. **GPT-4o-mini**
   - –ü—Ä–∏–∑–Ω–∞—á–µ–Ω–Ω—è: –ê–Ω–∞–ª—ñ–∑ –∑–∞–ø–∏—Ç—ñ–≤ —Ç–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó
   - –¢–æ–∫–µ–Ω–∏: 250 (–∞–Ω–∞–ª—ñ–∑) + 500 (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó)
   - –®–≤–∏–¥–∫—ñ—Å—Ç—å: 1-2 —Å–µ–∫—É–Ω–¥–∏

### –ß–æ–º—É Elasticsearch?

**–ü–µ—Ä–µ–≤–∞–≥–∏:**
- ‚úÖ –®–≤–∏–¥–∫–∏–π –ø–æ–≤–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–∏–π –ø–æ—à—É–∫ (BM25)
- ‚úÖ –í–±—É–¥–æ–≤–∞–Ω–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ –≤–µ–∫—Ç–æ—Ä–Ω–æ–≥–æ –ø–æ—à—É–∫—É (KNN)
- ‚úÖ –ú–∞—Å—à—Ç–∞–±–æ–≤–∞–Ω—ñ—Å—Ç—å (horizontal scaling)
- ‚úÖ –ü–ª–∞–≥—ñ–Ω –¥–ª—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó –º–æ–≤–∏
- ‚úÖ Powerful query DSL
- ‚úÖ Real-time —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—è

**–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∏:**
- PostgreSQL + pgvector (–ø—Ä–æ—Å—Ç—ñ—à–µ, –∞–ª–µ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–µ)
- Pinecone (—Ç—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä–∏, –±–µ–∑ BM25)
- Milvus (—Ç—ñ–ª—å–∫–∏ –≤–µ–∫—Ç–æ—Ä–∏)
- Qdrant (–¥–æ–±—Ä–∏–π, –∞–ª–µ –º–µ–Ω—à –∑—Ä—ñ–ª–∏–π)

### –Ø–∫ –ø—Ä–∞—Ü—é—î –≥—ñ–±—Ä–∏–¥–Ω–∏–π –ø–æ—à—É–∫?

```
–ó–∞–ø–∏—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞: "–∑–µ–ª–µ–Ω—ñ –æ–ª—ñ–≤—Ü—ñ"
         ‚îÇ
         ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
         ‚ñº                 ‚ñº                 ‚ñº
    –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è         BM25 –ø–æ—à—É–∫      KNN –ø–æ—à—É–∫
    embedding         (—Ç–µ–∫—Å—Ç)          (–≤–µ–∫—Ç–æ—Ä–∏)
         ‚îÇ                 ‚îÇ                 ‚îÇ
         ‚îÇ                 ‚ñº                 ‚îÇ
         ‚îÇ           Score BM25              ‚îÇ
         ‚îÇ           [0.8, 0.6, 0.5]         ‚îÇ
         ‚îÇ                 ‚îÇ                 ‚îÇ
         ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                           ‚ñº
                   Weighted Fusion
              final = 0.7*vector + 0.3*bm25
                           ‚îÇ
                           ‚ñº
                   [0.85, 0.72, 0.68]
                           ‚îÇ
                           ‚ñº
                   –¢–æ–ø-K —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤
```

### –©–æ —Ç–∞–∫–µ embeddings?

**Embedding** ‚Äî —Ü–µ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É —É –≤–∏–≥–ª—è–¥—ñ –≤–µ–∫—Ç–æ—Ä–∞ —á–∏—Å–µ–ª.

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–¢–µ–∫—Å—Ç: "–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ"
       ‚Üì
Embedding: [0.234, -0.567, 0.891, ..., 0.123]  // 4096 —á–∏—Å–µ–ª
```

**–ß–æ–º—É —Ü–µ –∫–æ—Ä–∏—Å–Ω–æ:**
- –°—Ö–æ–∂—ñ —Ç–µ–∫—Å—Ç–∏ –º–∞—é—Ç—å —Å—Ö–æ–∂—ñ –≤–µ–∫—Ç–æ—Ä–∏
- –ú–æ–∂–Ω–∞ –æ–±—á–∏—Å–ª–∏—Ç–∏ –≤—ñ–¥—Å—Ç–∞–Ω—å –º—ñ–∂ –≤–µ–∫—Ç–æ—Ä–∞–º–∏
- –ï—Ñ–µ–∫—Ç–∏–≤–Ω–∏–π –ø–æ—à—É–∫ –Ω–∞–π–±–ª–∏–∂—á–∏—Ö —Å—É—Å—ñ–¥—ñ–≤ (KNN)

**–í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è (—Å–ø—Ä–æ—â–µ–Ω–æ –¥–æ 2D):**
```
       –æ–ª—ñ–≤—Ü—ñ ‚Ä¢
              ‚îÇ \
              ‚îÇ  \ (–±–ª–∏–∑—å–∫–æ)
              ‚îÇ   \
    —Ä—É—á–∫–∏ ‚Ä¢‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚Ä¢ –∫–æ–ª—å–æ—Ä–æ–≤—ñ –æ–ª—ñ–≤—Ü—ñ
              ‚îÇ
              ‚îÇ (–¥–∞–ª–µ–∫–æ)
              ‚îÇ
           —Å—Ç—ñ–ª ‚Ä¢
```

---

## –ü–æ—à—É–∫ —Ç–∞ AI

### –ß–æ–º—É –ø–æ—à—É–∫ —ñ–Ω–æ–¥—ñ –ø–æ–≤–µ—Ä—Ç–∞—î –º–∞–ª–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤?

**–ü—Ä–∏—á–∏–Ω–∏:**
1. **–ê–¥–∞–ø—Ç–∏–≤–Ω–∞ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—è** ‚Äî —Å–∏—Å—Ç–µ–º–∞ –≤—ñ–¥—Ñ—ñ–ª—å—Ç—Ä–æ–≤—É—î –Ω–µ—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ç–æ–≤–∞—Ä–∏
2. **–ó–∞–Ω–∞–¥—Ç–æ —Å–ø–µ—Ü–∏—Ñ—ñ—á–Ω–∏–π –∑–∞–ø–∏—Ç** ‚Äî –Ω–µ–º–∞—î —Ç–æ—á–Ω–∏—Ö —Å–ø—ñ–≤–ø–∞–¥—ñ–Ω—å
3. **–í–∏—Å–æ–∫–∏–π –ø–æ—Ä—ñ–≥ —è–∫–æ—Å—Ç—ñ** ‚Äî —Ç—ñ–ª—å–∫–∏ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏

**–†—ñ—à–µ–Ω–Ω—è:**
- –ó—Ä–æ–±—ñ—Ç—å –∑–∞–ø–∏—Ç –±—ñ–ª—å—à –∑–∞–≥–∞–ª—å–Ω–∏–º
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–π—Ç–µ —Å–∏–Ω–æ–Ω—ñ–º–∏
- –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –ø—Ä–∞–≤–æ–ø–∏—Å

### –Ø–∫ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —è–∫—ñ—Å—Ç—å –ø–æ—à—É–∫—É?

**–î–ª—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤:**
1. **–¢–æ—á–Ω—ñ –∑–∞–ø–∏—Ç–∏:** "–æ–ª—ñ–≤—Ü—ñ –∫–æ–ª—å–æ—Ä–æ–≤—ñ 24 –∫–æ–ª—å–æ—Ä–∏"
2. **–ü—Ä–∏—Ä–æ–¥–Ω–∞ –º–æ–≤–∞ (AI –ø–æ—à—É–∫):** "–©–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–ª—è —à–∫–æ–ª–∏ –ø–µ—Ä—à–æ–∫–ª–∞—Å–Ω–∏–∫—É?"
3. **–£—Ç–æ—á–Ω–µ–Ω–Ω—è:** –¥–æ–¥–∞–π—Ç–µ –¥–µ—Ç–∞–ª—ñ (–±—Ä–µ–Ω–¥, –∫–æ–ª—ñ—Ä, —Ä–æ–∑–º—ñ—Ä)

**–î–ª—è –∞–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä—ñ–≤:**
```env
# –ó–º–µ–Ω—à–∏—Ç–∏ –ø–æ—Ä—ñ–≥ —Ñ—ñ–ª—å—Ç—Ä–∞—Ü—ñ—ó (–±—ñ–ª—å—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ñ–≤)
CHAT_SEARCH_SCORE_THRESHOLD_RATIO=0.3

# –ó–±—ñ–ª—å—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∫–∞–Ω–¥–∏–¥–∞—Ç—ñ–≤
KNN_NUM_CANDIDATES=1000

# –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –±–∞–ª–∞–Ω—Å hybrid –ø–æ—à—É–∫—É
HYBRID_ALPHA=0.6  # –ë—ñ–ª—å—à–µ –≤–∞–≥–∏ BM25
```

### –ß–æ–º—É AI —ñ–Ω–æ–¥—ñ –ø—Ä–æ—Å–∏—Ç—å —É—Ç–æ—á–Ω–µ–Ω—å?

GPT –≤–∏–∑–Ω–∞—á–∞—î intent —è–∫ `clarification` –∫–æ–ª–∏:
- –ó–∞–ø–∏—Ç –∑–∞–Ω–∞–¥—Ç–æ —Ä–æ–∑–º–∏—Ç–∏–π: "—â–æ—Å—å —Ü—ñ–∫–∞–≤–µ"
- –ü–æ—Ç—Ä—ñ–±–Ω—ñ –¥–æ–¥–∞—Ç–∫–æ–≤—ñ –¥–µ—Ç–∞–ª—ñ: "–ø–æ–¥–∞—Ä—É–Ω–æ–∫" (–∫–æ–º—É? —Å–∫—ñ–ª—å–∫–∏ —Ä–æ–∫—ñ–≤?)
- –ó–∞–ø–∏—Ç –Ω–µ –ø—Ä–æ —Ç–æ–≤–∞—Ä–∏: "—è–∫ –ø–æ–≥–æ–¥–∞?"

**–ü—Ä–∏–∫–ª–∞–¥:**
```
–ó–∞–ø–∏—Ç: "–ø–æ–¥–∞—Ä—É–Ω–æ–∫"
       ‚Üì
AI: "–ë—É–¥—å –ª–∞—Å–∫–∞, —É—Ç–æ—á–Ω—ñ—Ç—å: 
     - –ö–æ–º—É –ø–æ–¥–∞—Ä—É–Ω–æ–∫? (–¥–∏—Ç–∏–Ω—ñ, –¥–æ—Ä–æ—Å–ª–æ–º—É, –∫–æ–ª–µ–∑—ñ)
     - –ó —è–∫–æ—ó –Ω–∞–≥–æ–¥–∏? (–¥–µ–Ω—å –Ω–∞—Ä–æ–¥–∂–µ–Ω–Ω—è, —Å–≤—è—Ç–æ)
     - –Ø–∫–∏–π –±—é–¥–∂–µ—Ç?"
```

### –Ø–∫ –ø—Ä–∞—Ü—é—é—Ç—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó?

1. **Grounded recommendations** (–∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º):
   - –ë–∞–∑—É—é—Ç—å—Å—è –Ω–∞ –∑–Ω–∞–π–¥–µ–Ω–∏—Ö —Ç–æ–≤–∞—Ä–∞—Ö
   - –ü–æ—è—Å–Ω—é—é—Ç—å, —á–æ–º—É —Ç–æ–≤–∞—Ä –ø—ñ–¥—Ö–æ–¥–∏—Ç—å
   - –¢–æ–ø-3 –Ω–∞–π—Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ñ—à—ñ

2. **Free-form recommendations** (–æ–ø—Ü—ñ–æ–Ω–∞–ª—å–Ω–æ):
   - –ó–∞–≥–∞–ª—å–Ω—ñ –ø–æ—Ä–∞–¥–∏
   - –ú–æ–∂—É—Ç—å –∑–≥–∞–¥—É–≤–∞—Ç–∏ —Ç–æ–≤–∞—Ä–∏, —è–∫–∏—Ö –Ω–µ–º–∞—î –≤ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞—Ö

**–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è:**
```env
GROUNDED_RECOMMENDATIONS=true  # –¢—ñ–ª—å–∫–∏ –∑–Ω–∞–π–¥–µ–Ω—ñ —Ç–æ–≤–∞—Ä–∏
RECO_DETAILED_COUNT=3          # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –¥–µ—Ç–∞–ª—å–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
```

---

## –ü—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### –ß–æ–º—É –ø–µ—Ä—à–∏–π –ø–æ—à—É–∫ –ø–æ–≤—ñ–ª—å–Ω—ñ—à–∏–π?

**Cold start –µ—Ñ–µ–∫—Ç:**
- Embedding –∫–µ—à –ø–æ—Ä–æ–∂–Ω—ñ–π
- Elasticsearch cache –ø–æ—Ä–æ–∂–Ω—ñ–π
- HTTP connections —â–µ –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ñ

**–ß–∞—Å:**
- –ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç: 1-2 —Å–µ–∫—É–Ω–¥–∏
- –ù–∞—Å—Ç—É–ø–Ω—ñ: 300-500ms

**–†—ñ—à–µ–Ω–Ω—è:**
- **Warming up:** –∑—Ä–æ–±–∏—Ç–∏ –∫—ñ–ª—å–∫–∞ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤ –ø—ñ—Å–ª—è —Å—Ç–∞—Ä—Ç—É
- **Persistent cache:** –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Redis

### –Ø–∫ –∑–±—ñ–ª—å—à–∏—Ç–∏ —à–≤–∏–¥–∫—ñ—Å—Ç—å –ø–æ—à—É–∫—É?

**1. –ó–±—ñ–ª—å—à–∏—Ç–∏ –∫–µ—à:**
```env
EMBED_CACHE_SIZE=5000
CACHE_TTL_SECONDS=7200
```

**2. –ó–º–µ–Ω—à–∏—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤:**
```env
# –£ –ø—Ä–æ–º–ø—Ç–∞—Ö GPT –ø–æ–ø—Ä–æ—Å–∏—Ç–∏ –≥–µ–Ω–µ—Ä—É–≤–∞—Ç–∏ –Ω–µ –±—ñ–ª—å—à–µ 3 –ø—ñ–¥–∑–∞–ø–∏—Ç—ñ–≤
```

**3. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ Redis –¥–ª—è shared cache:**
```python
# –ó–∞–º—ñ—Å—Ç—å in-memory cache
import redis
cache = redis.Redis(host='redis', port=6379)
```

**4. –û–ø—Ç–∏–º—ñ–∑—É–≤–∞—Ç–∏ Elasticsearch:**
```bash
curl -X PUT "http://localhost:9200/products_qwen3_8b/_settings" \
  -H "Content-Type: application/json" \
  -d '{
    "index": {
      "refresh_interval": "30s",
      "number_of_replicas": 0
    }
  }'
```

**5. –î–æ–¥–∞—Ç–∏ –±—ñ–ª—å—à–µ API —ñ–Ω—Å—Ç–∞–Ω—Å—ñ–≤** (load balancing)

### –°–∫—ñ–ª—å–∫–∏ RAM –ø–æ—Ç—Ä—ñ–±–Ω–æ?

**–ú—ñ–Ω—ñ–º—É–º (development):**
- Elasticsearch: 2GB
- API: 512MB
- Nginx: 128MB
- **–ó–∞–≥–∞–ª–æ–º:** 3GB

**–†–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ (production):**
- Elasticsearch cluster: 8GB+ (4GB –Ω–∞ node)
- API instances: 1GB –Ω–∞ —ñ–Ω—Å—Ç–∞–Ω—Å
- Redis: 2GB
- **–ó–∞–≥–∞–ª–æ–º:** 12-16GB

### –°–∫—ñ–ª—å–∫–∏ –∫–æ—à—Ç—É—î OpenAI API?

**GPT-4o-mini —Ü—ñ–Ω–∏ (—Å—Ç–∞–Ω–æ–º –Ω–∞ 2025):**
- Input: $0.15 / 1M tokens
- Output: $0.60 / 1M tokens

**–°–µ—Ä–µ–¥–Ω—ñ–π —á–∞—Ç-–ø–æ—à—É–∫:**
- Input: ~300 tokens (–∞–Ω–∞–ª—ñ–∑) + 1000 tokens (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó) = 1300 tokens
- Output: ~200 tokens (–∞–Ω–∞–ª—ñ–∑) + 400 tokens (—Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó) = 600 tokens

**–í–∞—Ä—Ç—ñ—Å—Ç—å:**
- –û–¥–∏–Ω –ø–æ—à—É–∫: ~$0.0005 (0.0005$)
- 1000 –ø–æ—à—É–∫—ñ–≤: ~$0.50
- 10000 –ø–æ—à—É–∫—ñ–≤: ~$5.00

**–Ø–∫ –∑–º–µ–Ω—à–∏—Ç–∏ –≤–∏—Ç—Ä–∞—Ç–∏:**
```env
# –í—ñ–¥–∫–ª—é—á–∏—Ç–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó –¥–ª—è –¥–µ—è–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä—ñ–π
GROUNDED_RECOMMENDATIONS=false

# –ó–º–µ–Ω—à–∏—Ç–∏ max tokens
GPT_MAX_TOKENS_RECO=300

# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —Ç—ñ–ª—å–∫–∏ –¥–ª—è —Å–∫–ª–∞–¥–Ω–∏—Ö –∑–∞–ø–∏—Ç—ñ–≤
ENABLE_GPT_CHAT=conditional  # –í–ª–∞—Å–Ω–∞ –ª–æ–≥—ñ–∫–∞
```

---

## Deployment

### Docker vs Kubernetes?

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | Docker Compose | Kubernetes |
|----------------|----------------|------------|
| –°–∫–ª–∞–¥–Ω—ñ—Å—Ç—å | üü¢ –ü—Ä–æ—Å—Ç–æ | üî¥ –°–∫–ª–∞–¥–Ω–æ |
| –ú–∞—Å—à—Ç–∞–±—É–≤–∞–Ω–Ω—è | üü° –í–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–µ | üü¢ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–µ |
| HA | ‚ùå –ù—ñ | ‚úÖ –¢–∞–∫ |
| Auto-scaling | ‚ùå –ù—ñ | ‚úÖ –¢–∞–∫ |
| –ü—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è | Dev, small prod | Medium-large prod |

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ—ó:**
- **< 10k –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** Docker Compose
- **> 10k –∑–∞–ø–∏—Ç—ñ–≤/–¥–µ–Ω—å:** Kubernetes

### –Ø–∫ –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ SSL?

**–ó Let's Encrypt (–±–µ–∑–∫–æ—à—Ç–æ–≤–Ω–æ):**
```bash
# –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ certbot
sudo apt install certbot python3-certbot-nginx

# –û—Ç—Ä–∏–º–∞—Ç–∏ —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç
sudo certbot --nginx -d your-domain.com

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è
sudo certbot renew --dry-run
```

**–ó –≤–ª–∞—Å–Ω–∏–º —Å–µ—Ä—Ç–∏—Ñ—ñ–∫–∞—Ç–æ–º:**
```nginx
server {
    listen 443 ssl;
    ssl_certificate /path/to/cert.pem;
    ssl_certificate_key /path/to/key.pem;
}
```

### –Ø–∫ –∑—Ä–æ–±–∏—Ç–∏ backup?

**Elasticsearch snapshot:**
```bash
# –°—Ç–≤–æ—Ä–∏—Ç–∏ snapshot repository
curl -X PUT "localhost:9200/_snapshot/backup" \
  -H "Content-Type: application/json" \
  -d '{
    "type": "fs",
    "settings": {
      "location": "/backups/elasticsearch"
    }
  }'

# –°—Ç–≤–æ—Ä–∏—Ç–∏ snapshot
curl -X PUT "localhost:9200/_snapshot/backup/snapshot_1?wait_for_completion=true"

# –í—ñ–¥–Ω–æ–≤–∏—Ç–∏
curl -X POST "localhost:9200/_snapshot/backup/snapshot_1/_restore"
```

**Docker volumes:**
```bash
# Backup
docker run --rm \
  -v embeddingsqwen3_elasticsearch-data:/data \
  -v $(pwd)/backups:/backup \
  alpine tar czf /backup/es-data.tar.gz -C /data .

# Restore
docker run --rm \
  -v embeddingsqwen3_elasticsearch-data:/data \
  -v $(pwd)/backups:/backup \
  alpine tar xzf /backup/es-data.tar.gz -C /data
```

### –ß–∏ –º–æ–∂–Ω–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ –±–µ–∑ Docker?

**–¢–∞–∫, –∞–ª–µ —Å–∫–ª–∞–¥–Ω—ñ—à–µ:**

```bash
# 1. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Elasticsearch
wget https://artifacts.elastic.co/downloads/elasticsearch/elasticsearch-8.11.1-linux-x86_64.tar.gz
tar -xzf elasticsearch-8.11.1-linux-x86_64.tar.gz
./elasticsearch-8.11.1/bin/elasticsearch

# 2. –í—Å—Ç–∞–Ω–æ–≤–∏—Ç–∏ Python –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
cd backend
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# 3. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ API
uvicorn main:app --host 0.0.0.0 --port 8000

# 4. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ nginx
sudo cp nginx.conf /etc/nginx/sites-available/semantic-search
sudo ln -s /etc/nginx/sites-available/semantic-search /etc/nginx/sites-enabled/
sudo systemctl reload nginx

# 5. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Ollama –æ–∫—Ä–µ–º–æ
```

**Docker –ø—Ä–æ—Å—Ç—ñ—à–µ —Ç–∞ –Ω–∞–¥—ñ–π–Ω—ñ—à–µ!** üê≥

---

## Troubleshooting

### –ü–æ—à—É–∫ –Ω–µ –ø—Ä–∞—Ü—é—î / –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫—É 500

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ API
docker-compose logs api

# 2. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ Elasticsearch
curl http://localhost:9200/_cluster/health

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ embedding API
curl -X POST http://10.2.0.171:9001/api/embeddings \
  -H "Content-Type: application/json" \
  -d '{"model": "dengcao/Qwen3-Embedding-8B:Q8_0", "prompt": "—Ç–µ—Å—Ç"}'

# 4. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ health endpoint
curl http://localhost:8080/health
```

**–ü–æ—à–∏—Ä–µ–Ω—ñ –ø—Ä–∏—á–∏–Ω–∏:**
1. Elasticsearch –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∏–π
2. Embedding API –Ω–µ –≤—ñ–¥–ø–æ–≤—ñ–¥–∞—î
3. OpenAI API key –Ω–µ–≤–∞–ª—ñ–¥–Ω–∏–π
4. –Ü–Ω–¥–µ–∫—Å –Ω–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π

### SSE –∑'—î–¥–Ω–∞–Ω–Ω—è –æ–±—Ä–∏–≤–∞—î—Ç—å—Å—è

**–ü—Ä–∏—á–∏–Ω–∏:**
- Nginx —Ç–∞–π–º–∞—É—Ç
- –ü—Ä–æ–∫—Å—ñ —Ç–∞–π–º–∞—É—Ç
- Firewall –±–ª–æ–∫—É—î

**–†—ñ—à–µ–Ω–Ω—è –≤ nginx.conf:**
```nginx
location /chat/search/sse {
    proxy_pass http://api:8000/chat/search/sse;
    proxy_read_timeout 3600s;  # 1 –≥–æ–¥–∏–Ω–∞
    proxy_buffering off;
    proxy_cache off;
    chunked_transfer_encoding off;
}
```

### Elasticsearch: "max virtual memory areas vm.max_map_count too low"

```bash
# –¢–∏–º—á–∞—Å–æ–≤–æ
sudo sysctl -w vm.max_map_count=262144

# –ü–æ—Å—Ç—ñ–π–Ω–æ
echo "vm.max_map_count=262144" | sudo tee -a /etc/sysctl.conf
sudo sysctl -p
```

### Out of Memory (OOM)

**–°–∏–º–ø—Ç–æ–º–∏:**
- Container –∑—É–ø–∏–Ω—è—î—Ç—å—Å—è
- –õ–æ–≥: "Killed"
- Java heap space errors

**–î—ñ–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
docker stats

# Elasticsearch heap
docker exec elasticsearch-qwen3 cat /proc/1/environ | tr '\0' '\n' | grep ES_JAVA_OPTS
```

**–†—ñ—à–µ–Ω–Ω—è:**
```yaml
# docker-compose.yml
services:
  elasticsearch:
    environment:
      - ES_JAVA_OPTS=-Xms2g -Xmx2g  # –ó–º–µ–Ω—à–∏—Ç–∏ —è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ
```

### –ö–µ—à –Ω–µ –ø—Ä–∞—Ü—é—î / –Ω–∏–∑—å–∫–∏–π hit rate

**–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞:**
```bash
curl http://localhost:8080/cache/stats
```

**–ü—Ä–∏—á–∏–Ω–∏:**
1. **–ú–∞–ª–∏–π —Ä–æ–∑–º—ñ—Ä –∫–µ—à—É:**
   ```env
   EMBED_CACHE_SIZE=5000  # –ó–±—ñ–ª—å—à–∏—Ç–∏
   ```

2. **–ö–æ—Ä–æ—Ç–∫–∏–π TTL:**
   ```env
   CACHE_TTL_SECONDS=7200  # –ó–±—ñ–ª—å—à–∏—Ç–∏
   ```

3. **–†—ñ–∑–Ω—ñ —Ñ–æ—Ä–º—É–ª—é–≤–∞–Ω–Ω—è –∑–∞–ø–∏—Ç—ñ–≤** ‚Äî –Ω–æ—Ä–º–∞–ª—å–Ω–æ, —Ü–µ –Ω–µ –±–∞–≥

### GPT –ø–æ–≤–µ—Ä—Ç–∞—î –ø–æ–º–∏–ª–∫–∏

**–ü–æ–º–∏–ª–∫–∞ 429: "Rate limit exceeded"**
```
–†—ñ—à–µ–Ω–Ω—è: –ó–∞—á–µ–∫–∞—Ç–∏ –∞–±–æ –∑–±—ñ–ª—å—à–∏—Ç–∏ –ª—ñ–º—ñ—Ç –≤ OpenAI dashboard
```

**–ü–æ–º–∏–ª–∫–∞ 401: "Invalid API key"**
```env
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∫–ª—é—á
OPENAI_API_KEY=sk-...  # –ú–∞—î –ø–æ—á–∏–Ω–∞—Ç–∏—Å—è –∑ sk-
```

**Timeout:**
```env
# –ó–±—ñ–ª—å—à–∏—Ç–∏ timeout
GPT_ANALYZE_TIMEOUT_SECONDS=15.0
GPT_RECO_TIMEOUT_SECONDS=20.0
```

---

## –ö–æ–Ω—Ç–∞–∫—Ç–∏ —Ç–∞ –ø—ñ–¥—Ç—Ä–∏–º–∫–∞

### –î–µ –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–ø–æ–º–æ–≥—É?

1. **–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è:** –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤—Å—ñ MD —Ñ–∞–π–ª–∏ –≤ `/docs`
2. **–õ–æ–≥–∏:** `docker-compose logs -f`
3. **GitHub Issues:** –°—Ç–≤–æ—Ä—ñ—Ç—å issue –∑ –¥–µ—Ç–∞–ª—è–º–∏
4. **Email:** support@ta-da.net.ua

### –Ø–∫ –ø–æ–≤—ñ–¥–æ–º–∏—Ç–∏ –ø—Ä–æ –±–∞–≥?

**–®–∞–±–ª–æ–Ω issue:**
```markdown
## –û–ø–∏—Å –ø—Ä–æ–±–ª–µ–º–∏
–ö–æ—Ä–æ—Ç–∫–∏–π –æ–ø–∏—Å

## –ö—Ä–æ–∫–∏ –≤—ñ–¥—Ç–≤–æ—Ä–µ–Ω–Ω—è
1. –í—ñ–¥–∫—Ä–∏—Ç–∏...
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏...
3. –ü–æ–±–∞—á–∏—Ç–∏ –ø–æ–º–∏–ª–∫—É...

## –û—á—ñ–∫—É–≤–∞–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞
–©–æ –º–∞—î –≤—ñ–¥–±—É—Ç–∏—Å—è

## –§–∞–∫—Ç–∏—á–Ω–∞ –ø–æ–≤–µ–¥—ñ–Ω–∫–∞
–©–æ –≤—ñ–¥–±—É–≤–∞—î—Ç—å—Å—è –Ω–∞—Å–ø—Ä–∞–≤–¥—ñ

## –°–µ—Ä–µ–¥–æ–≤–∏—â–µ
- OS: Ubuntu 22.04
- Docker version: 24.0.5
- Browser: Chrome 118

## –õ–æ–≥–∏
```
–í—Å—Ç–∞–≤–∏—Ç–∏ relevant –ª–æ–≥–∏
```

## –°–∫—Ä—ñ–Ω—à–æ—Ç–∏
–Ø–∫—â–æ –º–æ–∂–ª–∏–≤–æ
```

---

**–í–µ—Ä—Å—ñ—è:** 1.0.0  
**–î–∞—Ç–∞ –æ–Ω–æ–≤–ª–µ–Ω–Ω—è:** 13 –∂–æ–≤—Ç–Ω—è 2025

**–ù–µ –∑–Ω–∞–π—à–ª–∏ –≤—ñ–¥–ø–æ–≤—ñ–¥—å?** –°—Ç–≤–æ—Ä—ñ—Ç—å issue –Ω–∞ GitHub! üöÄ

